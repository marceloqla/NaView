class NaViewStyleEditor{constructor(t,e,l){this.naview_obj=t,this.editor_id=e,this.console_id=l,this.editor_status=!1,this.console_status=!1,this.console_type="text",this.allowclose=!0,this.style_obj_keys_to_html={canvas:{type:"dict",title:"Canvas",pad:"0px",cpad:"8px",subs:{border:{type:"dict",title:"Borders",pad:"0px",cpad:"8px",subs:{right:{type:"float",bounds:[0,1],title:"Right",default:.02},left:{type:"float",bounds:[0,1],title:"Left",default:.02},top:{type:"float",bounds:[0,1],title:"Top",default:.02},bottom:{type:"float",bounds:[0,1],title:"Bottom",default:.02}}}}},membrane:{type:"dict",title:"Membrane",pad:"0px",cpad:"8px",subs:{membrane_mode:{type:"select",title:"Membrane Mode:",options:["box","lipid"],updatable:{type:!0,select_id:"membrane>membrane_draw_opts"}},membrane_draw_opts:{type:"relative_dict",title:"Membrane Rendering:",pad:"0px",cpad:"8px",select_id:"membrane>membrane_mode",subs:{box:{fill:{type:"color",title:"Fill:",default:"yellow"},opacity:{type:"float",bounds:[0,1],title:"Opacity",default:.6}},lipid:{hfill:{type:"color",title:"Head Fill:",default:"white"},hstroke:{type:"color",title:"Head Stroke Fill:",default:"black"},hstroke_s:{type:"int",bounds:[],title:"Head Stroke Size",default:2},hopacity:{type:"float",bounds:[0,1],title:"Head Opacity",default:.6},tfill:{type:"color",title:"Tail Fill:",default:"black"},tstroke:{type:"color",title:"Tail Stroke Fill:",default:"black"},tstroke_s:{type:"int",bounds:[],title:"Tail Stroke Size",default:2},topacity:{type:"float",bounds:[0,1],title:"Tail Opacity",default:.6},lipid_head_radius_width:{type:"float",bounds:[0,1],title:"Head Radius Width",default:.0075},lipid_head_radius_height:{type:"float",bounds:[0,1],title:"Head Radius Height",default:.1},lipid_tail_number:{type:"int",bounds:[1,2],title:"Tail Number",default:1},lipid_tail_spacing:{type:"float",bounds:[0,1],title:"Head Radius Height",default:.001}}}},membrane_region_height:{type:"float",bounds:[0,1],title:"Membrane Height:",default:.4}}},protein:{type:"dict",title:"Protein",pad:"0px",cpad:"8px",subs:{helix_mode:{type:"select",title:"Helix Mode:",options:["box","cylinder","cartoon"],updatable:{type:!0,select_id:"protein>helix_draw_opts"}},helix_draw_opts:{type:"relative_dict",title:"Helix Rendering:",pad:"0px",cpad:"8px",select_id:"protein>helix_mode",subs:{box:{fill:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Helix Fill Color:",depth:2,subs:{I:{1:{type:"color",title:"DI-H1",default:"red"},2:{type:"color",title:"DI-H2",default:"red"},3:{type:"color",title:"DI-H3",default:"red"},4:{type:"color",title:"DI-H4",default:"red"},5:{type:"color",title:"DI-H5",default:"red"},6:{type:"color",title:"DI-H6",default:"red"}},II:{1:{type:"color",title:"DII-H1",default:"red"},2:{type:"color",title:"DII-H2",default:"red"},3:{type:"color",title:"DII-H3",default:"red"},4:{type:"color",title:"DII-H4",default:"red"},5:{type:"color",title:"DII-H5",default:"red"},6:{type:"color",title:"DII-H6",default:"red"}},III:{1:{type:"color",title:"DIII-H1",default:"red"},2:{type:"color",title:"DIII-H2",default:"red"},3:{type:"color",title:"DIII-H3",default:"red"},4:{type:"color",title:"DIII-H4",default:"red"},5:{type:"color",title:"DIII-H5",default:"red"},6:{type:"color",title:"DIII-H6",default:"red"}},IV:{1:{type:"color",title:"DIV-H1",default:"red"},2:{type:"color",title:"DIV-H2",default:"red"},3:{type:"color",title:"DIV-H3",default:"red"},4:{type:"color",title:"DIV-H4",default:"red"},5:{type:"color",title:"DIV-H5",default:"red"},6:{type:"color",title:"DIV-H6",default:"red"}}}},stroke:{type:"composed_dict",title:"Helix Stroke Color:",pad:"0px",cpad:"8px",depth:2,subs:{I:{1:{type:"color",title:"DI-H1",default:"red"},2:{type:"color",title:"DI-H2",default:"red"},3:{type:"color",title:"DI-H3",default:"red"},4:{type:"color",title:"DI-H4",default:"red"},5:{type:"color",title:"DI-H5",default:"red"},6:{type:"color",title:"DI-H6",default:"red"}},II:{1:{type:"color",title:"DII-H1",default:"red"},2:{type:"color",title:"DII-H2",default:"red"},3:{type:"color",title:"DII-H3",default:"red"},4:{type:"color",title:"DII-H4",default:"red"},5:{type:"color",title:"DII-H5",default:"red"},6:{type:"color",title:"DII-H6",default:"red"}},III:{1:{type:"color",title:"DIII-H1",default:"red"},2:{type:"color",title:"DIII-H2",default:"red"},3:{type:"color",title:"DIII-H3",default:"red"},4:{type:"color",title:"DIII-H4",default:"red"},5:{type:"color",title:"DIII-H5",default:"red"},6:{type:"color",title:"DIII-H6",default:"red"}},IV:{1:{type:"color",title:"DIV-H1",default:"red"},2:{type:"color",title:"DIV-H2",default:"red"},3:{type:"color",title:"DIV-H3",default:"red"},4:{type:"color",title:"DIV-H4",default:"red"},5:{type:"color",title:"DIV-H5",default:"red"},6:{type:"color",title:"DIV-H6",default:"red"}}}},stroke_size:{type:"composed_dict",title:"Helix Stroke Size:",pad:"0px",cpad:"8px",depth:2,subs:{I:{1:{type:"int",bounds:[],title:"DI-H1",default:2},2:{type:"int",bounds:[],title:"DI-H2",default:2},3:{type:"int",bounds:[],title:"DI-H3",default:2},4:{type:"int",bounds:[],title:"DI-H4",default:2},5:{type:"int",bounds:[],title:"DI-H5",default:2},6:{type:"int",bounds:[],title:"DI-H6",default:2}},II:{1:{type:"int",bounds:[],title:"DI-H1",default:2},2:{type:"int",bounds:[],title:"DI-H2",default:2},3:{type:"int",bounds:[],title:"DI-H3",default:2},4:{type:"int",bounds:[],title:"DI-H4",default:2},5:{type:"int",bounds:[],title:"DI-H5",default:2},6:{type:"int",bounds:[],title:"DI-H6",default:2}},III:{1:{type:"int",bounds:[],title:"DI-H1",default:2},2:{type:"int",bounds:[],title:"DI-H2",default:2},3:{type:"int",bounds:[],title:"DI-H3",default:2},4:{type:"int",bounds:[],title:"DI-H4",default:2},5:{type:"int",bounds:[],title:"DI-H5",default:2},6:{type:"int",bounds:[],title:"DI-H6",default:2}},IV:{1:{type:"int",bounds:[],title:"DI-H1",default:2},2:{type:"int",bounds:[],title:"DI-H2",default:2},3:{type:"int",bounds:[],title:"DI-H3",default:2},4:{type:"int",bounds:[],title:"DI-H4",default:2},5:{type:"int",bounds:[],title:"DI-H5",default:2},6:{type:"int",bounds:[],title:"DI-H6",default:2}}}},opacity:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Helix opacity",depth:2,subs:{I:{1:{type:"float",bounds:[0,1],title:"DI-H1",default:1},2:{type:"float",bounds:[0,1],title:"DI-H2",default:1},3:{type:"float",bounds:[0,1],title:"DI-H3",default:1},4:{type:"float",bounds:[0,1],title:"DI-H4",default:1},5:{type:"float",bounds:[0,1],title:"DI-H5",default:1},6:{type:"float",bounds:[0,1],title:"DI-H6",default:1}},II:{1:{type:"float",bounds:[0,1],title:"DI-H1",default:1},2:{type:"float",bounds:[0,1],title:"DI-H2",default:1},3:{type:"float",bounds:[0,1],title:"DI-H3",default:1},4:{type:"float",bounds:[0,1],title:"DI-H4",default:1},5:{type:"float",bounds:[0,1],title:"DI-H5",default:1},6:{type:"float",bounds:[0,1],title:"DI-H6",default:1}},III:{1:{type:"float",bounds:[0,1],title:"DI-H1",default:1},2:{type:"float",bounds:[0,1],title:"DI-H2",default:1},3:{type:"float",bounds:[0,1],title:"DI-H3",default:1},4:{type:"float",bounds:[0,1],title:"DI-H4",default:1},5:{type:"float",bounds:[0,1],title:"DI-H5",default:1},6:{type:"float",bounds:[0,1],title:"DI-H6",default:1}},IV:{1:{type:"float",bounds:[0,1],title:"DI-H1",default:1},2:{type:"float",bounds:[0,1],title:"DI-H2",default:1},3:{type:"float",bounds:[0,1],title:"DI-H3",default:1},4:{type:"float",bounds:[0,1],title:"DI-H4",default:1},5:{type:"float",bounds:[0,1],title:"DI-H5",default:1},6:{type:"float",bounds:[0,1],title:"DI-H6",default:1}}}}},cylinder:{fill:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Helix Fill Color:",depth:2,subs:{I:{1:{type:"color",title:"DI-H1",default:"red"},2:{type:"color",title:"DI-H2",default:"red"},3:{type:"color",title:"DI-H3",default:"red"},4:{type:"color",title:"DI-H4",default:"red"},5:{type:"color",title:"DI-H5",default:"red"},6:{type:"color",title:"DI-H6",default:"red"}},II:{1:{type:"color",title:"DII-H1",default:"red"},2:{type:"color",title:"DII-H2",default:"red"},3:{type:"color",title:"DII-H3",default:"red"},4:{type:"color",title:"DII-H4",default:"red"},5:{type:"color",title:"DII-H5",default:"red"},6:{type:"color",title:"DII-H6",default:"red"}},III:{1:{type:"color",title:"DIII-H1",default:"red"},2:{type:"color",title:"DIII-H2",default:"red"},3:{type:"color",title:"DIII-H3",default:"red"},4:{type:"color",title:"DIII-H4",default:"red"},5:{type:"color",title:"DIII-H5",default:"red"},6:{type:"color",title:"DIII-H6",default:"red"}},IV:{1:{type:"color",title:"DIV-H1",default:"red"},2:{type:"color",title:"DIV-H2",default:"red"},3:{type:"color",title:"DIV-H3",default:"red"},4:{type:"color",title:"DIV-H4",default:"red"},5:{type:"color",title:"DIV-H5",default:"red"},6:{type:"color",title:"DIV-H6",default:"red"}}}},stroke:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Helix Stroke Color:",depth:2,subs:{I:{1:{type:"color",title:"DI-H1",default:"red"},2:{type:"color",title:"DI-H2",default:"red"},3:{type:"color",title:"DI-H3",default:"red"},4:{type:"color",title:"DI-H4",default:"red"},5:{type:"color",title:"DI-H5",default:"red"},6:{type:"color",title:"DI-H6",default:"red"}},II:{1:{type:"color",title:"DII-H1",default:"red"},2:{type:"color",title:"DII-H2",default:"red"},3:{type:"color",title:"DII-H3",default:"red"},4:{type:"color",title:"DII-H4",default:"red"},5:{type:"color",title:"DII-H5",default:"red"},6:{type:"color",title:"DII-H6",default:"red"}},III:{1:{type:"color",title:"DIII-H1",default:"red"},2:{type:"color",title:"DIII-H2",default:"red"},3:{type:"color",title:"DIII-H3",default:"red"},4:{type:"color",title:"DIII-H4",default:"red"},5:{type:"color",title:"DIII-H5",default:"red"},6:{type:"color",title:"DIII-H6",default:"red"}},IV:{1:{type:"color",title:"DIV-H1",default:"red"},2:{type:"color",title:"DIV-H2",default:"red"},3:{type:"color",title:"DIV-H3",default:"red"},4:{type:"color",title:"DIV-H4",default:"red"},5:{type:"color",title:"DIV-H5",default:"red"},6:{type:"color",title:"DIV-H6",default:"red"}}}},stroke_size:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Helix Stroke Size:",depth:2,subs:{I:{1:{type:"int",bounds:[],title:"DI-H1",default:2},2:{type:"int",bounds:[],title:"DI-H2",default:2},3:{type:"int",bounds:[],title:"DI-H3",default:2},4:{type:"int",bounds:[],title:"DI-H4",default:2},5:{type:"int",bounds:[],title:"DI-H5",default:2},6:{type:"int",bounds:[],title:"DI-H6",default:2}},II:{1:{type:"int",bounds:[],title:"DI-H1",default:2},2:{type:"int",bounds:[],title:"DI-H2",default:2},3:{type:"int",bounds:[],title:"DI-H3",default:2},4:{type:"int",bounds:[],title:"DI-H4",default:2},5:{type:"int",bounds:[],title:"DI-H5",default:2},6:{type:"int",bounds:[],title:"DI-H6",default:2}},III:{1:{type:"int",bounds:[],title:"DI-H1",default:2},2:{type:"int",bounds:[],title:"DI-H2",default:2},3:{type:"int",bounds:[],title:"DI-H3",default:2},4:{type:"int",bounds:[],title:"DI-H4",default:2},5:{type:"int",bounds:[],title:"DI-H5",default:2},6:{type:"int",bounds:[],title:"DI-H6",default:2}},IV:{1:{type:"int",bounds:[],title:"DI-H1",default:2},2:{type:"int",bounds:[],title:"DI-H2",default:2},3:{type:"int",bounds:[],title:"DI-H3",default:2},4:{type:"int",bounds:[],title:"DI-H4",default:2},5:{type:"int",bounds:[],title:"DI-H5",default:2},6:{type:"int",bounds:[],title:"DI-H6",default:2}}}},opacity:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Helix opacity",depth:2,subs:{I:{1:{type:"float",bounds:[0,1],title:"DI-H1",default:1},2:{type:"float",bounds:[0,1],title:"DI-H2",default:1},3:{type:"float",bounds:[0,1],title:"DI-H3",default:1},4:{type:"float",bounds:[0,1],title:"DI-H4",default:1},5:{type:"float",bounds:[0,1],title:"DI-H5",default:1},6:{type:"float",bounds:[0,1],title:"DI-H6",default:1}},II:{1:{type:"float",bounds:[0,1],title:"DI-H1",default:1},2:{type:"float",bounds:[0,1],title:"DI-H2",default:1},3:{type:"float",bounds:[0,1],title:"DI-H3",default:1},4:{type:"float",bounds:[0,1],title:"DI-H4",default:1},5:{type:"float",bounds:[0,1],title:"DI-H5",default:1},6:{type:"float",bounds:[0,1],title:"DI-H6",default:1}},III:{1:{type:"float",bounds:[0,1],title:"DI-H1",default:1},2:{type:"float",bounds:[0,1],title:"DI-H2",default:1},3:{type:"float",bounds:[0,1],title:"DI-H3",default:1},4:{type:"float",bounds:[0,1],title:"DI-H4",default:1},5:{type:"float",bounds:[0,1],title:"DI-H5",default:1},6:{type:"float",bounds:[0,1],title:"DI-H6",default:1}},IV:{1:{type:"float",bounds:[0,1],title:"DI-H1",default:1},2:{type:"float",bounds:[0,1],title:"DI-H2",default:1},3:{type:"float",bounds:[0,1],title:"DI-H3",default:1},4:{type:"float",bounds:[0,1],title:"DI-H4",default:1},5:{type:"float",bounds:[0,1],title:"DI-H5",default:1},6:{type:"float",bounds:[0,1],title:"DI-H6",default:1}}}},top_cylinder_stroke:{type:"color",title:"Top Cyl Str Color",default:"black"},top_cylinder_stroke_size:{type:"float",title:"Top Cyl Str Size",bounds:[],default:1},bottom_cylinder_stroke:{type:"color",title:"Bottom Cyl Str Color",default:"black"},bottom_cylinder_stroke_size:{type:"float",title:"Bottom Cyl Str Size",bounds:[],default:1}},cartoon:{fill:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Front Helix Turn Fill Color:",depth:2,subs:{I:{1:{type:"color",title:"DI-H1",default:"red"},2:{type:"color",title:"DI-H2",default:"red"},3:{type:"color",title:"DI-H3",default:"red"},4:{type:"color",title:"DI-H4",default:"red"},5:{type:"color",title:"DI-H5",default:"red"},6:{type:"color",title:"DI-H6",default:"red"}},II:{1:{type:"color",title:"DII-H1",default:"red"},2:{type:"color",title:"DII-H2",default:"red"},3:{type:"color",title:"DII-H3",default:"red"},4:{type:"color",title:"DII-H4",default:"red"},5:{type:"color",title:"DII-H5",default:"red"},6:{type:"color",title:"DII-H6",default:"red"}},III:{1:{type:"color",title:"DIII-H1",default:"red"},2:{type:"color",title:"DIII-H2",default:"red"},3:{type:"color",title:"DIII-H3",default:"red"},4:{type:"color",title:"DIII-H4",default:"red"},5:{type:"color",title:"DIII-H5",default:"red"},6:{type:"color",title:"DIII-H6",default:"red"}},IV:{1:{type:"color",title:"DIV-H1",default:"red"},2:{type:"color",title:"DIV-H2",default:"red"},3:{type:"color",title:"DIV-H3",default:"red"},4:{type:"color",title:"DIV-H4",default:"red"},5:{type:"color",title:"DIV-H5",default:"red"},6:{type:"color",title:"DIV-H6",default:"red"}}}},back_fill:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Back Helix Turn Fill Color:",depth:2,subs:{I:{1:{type:"color",title:"DI-H1",default:"salmon"},2:{type:"color",title:"DI-H2",default:"salmon"},3:{type:"color",title:"DI-H3",default:"salmon"},4:{type:"color",title:"DI-H4",default:"salmon"},5:{type:"color",title:"DI-H5",default:"salmon"},6:{type:"color",title:"DI-H6",default:"salmon"}},II:{1:{type:"color",title:"DII-H1",default:"salmon"},2:{type:"color",title:"DII-H2",default:"salmon"},3:{type:"color",title:"DII-H3",default:"salmon"},4:{type:"color",title:"DII-H4",default:"salmon"},5:{type:"color",title:"DII-H5",default:"salmon"},6:{type:"color",title:"DII-H6",default:"salmon"}},III:{1:{type:"color",title:"DIII-H1",default:"salmon"},2:{type:"color",title:"DIII-H2",default:"salmon"},3:{type:"color",title:"DIII-H3",default:"salmon"},4:{type:"color",title:"DIII-H4",default:"salmon"},5:{type:"color",title:"DIII-H5",default:"salmon"},6:{type:"color",title:"DIII-H6",default:"salmon"}},IV:{1:{type:"color",title:"DIV-H1",default:"salmon"},2:{type:"color",title:"DIV-H2",default:"salmon"},3:{type:"color",title:"DIV-H3",default:"salmon"},4:{type:"color",title:"DIV-H4",default:"salmon"},5:{type:"color",title:"DIV-H5",default:"salmon"},6:{type:"color",title:"DIV-H6",default:"salmon"}}}},stroke:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Helix Stroke Color:",depth:2,subs:{I:{1:{type:"color",title:"DI-H1",default:"red"},2:{type:"color",title:"DI-H2",default:"red"},3:{type:"color",title:"DI-H3",default:"red"},4:{type:"color",title:"DI-H4",default:"red"},5:{type:"color",title:"DI-H5",default:"red"},6:{type:"color",title:"DI-H6",default:"red"}},II:{1:{type:"color",title:"DII-H1",default:"red"},2:{type:"color",title:"DII-H2",default:"red"},3:{type:"color",title:"DII-H3",default:"red"},4:{type:"color",title:"DII-H4",default:"red"},5:{type:"color",title:"DII-H5",default:"red"},6:{type:"color",title:"DII-H6",default:"red"}},III:{1:{type:"color",title:"DIII-H1",default:"red"},2:{type:"color",title:"DIII-H2",default:"red"},3:{type:"color",title:"DIII-H3",default:"red"},4:{type:"color",title:"DIII-H4",default:"red"},5:{type:"color",title:"DIII-H5",default:"red"},6:{type:"color",title:"DIII-H6",default:"red"}},IV:{1:{type:"color",title:"DIV-H1",default:"red"},2:{type:"color",title:"DIV-H2",default:"red"},3:{type:"color",title:"DIV-H3",default:"red"},4:{type:"color",title:"DIV-H4",default:"red"},5:{type:"color",title:"DIV-H5",default:"red"},6:{type:"color",title:"DIV-H6",default:"red"}}}},stroke_size:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Helix Stroke Size:",depth:2,subs:{I:{1:{type:"int",bounds:[],title:"DI-H1",default:2},2:{type:"int",bounds:[],title:"DI-H2",default:2},3:{type:"int",bounds:[],title:"DI-H3",default:2},4:{type:"int",bounds:[],title:"DI-H4",default:2},5:{type:"int",bounds:[],title:"DI-H5",default:2},6:{type:"int",bounds:[],title:"DI-H6",default:2}},II:{1:{type:"int",bounds:[],title:"DI-H1",default:2},2:{type:"int",bounds:[],title:"DI-H2",default:2},3:{type:"int",bounds:[],title:"DI-H3",default:2},4:{type:"int",bounds:[],title:"DI-H4",default:2},5:{type:"int",bounds:[],title:"DI-H5",default:2},6:{type:"int",bounds:[],title:"DI-H6",default:2}},III:{1:{type:"int",bounds:[],title:"DI-H1",default:2},2:{type:"int",bounds:[],title:"DI-H2",default:2},3:{type:"int",bounds:[],title:"DI-H3",default:2},4:{type:"int",bounds:[],title:"DI-H4",default:2},5:{type:"int",bounds:[],title:"DI-H5",default:2},6:{type:"int",bounds:[],title:"DI-H6",default:2}},IV:{1:{type:"int",bounds:[],title:"DI-H1",default:2},2:{type:"int",bounds:[],title:"DI-H2",default:2},3:{type:"int",bounds:[],title:"DI-H3",default:2},4:{type:"int",bounds:[],title:"DI-H4",default:2},5:{type:"int",bounds:[],title:"DI-H5",default:2},6:{type:"int",bounds:[],title:"DI-H6",default:2}}}},opacity:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Helix opacity",depth:2,subs:{I:{1:{type:"float",bounds:[0,1],title:"DI-H1",default:1},2:{type:"float",bounds:[0,1],title:"DI-H2",default:1},3:{type:"float",bounds:[0,1],title:"DI-H3",default:1},4:{type:"float",bounds:[0,1],title:"DI-H4",default:1},5:{type:"float",bounds:[0,1],title:"DI-H5",default:1},6:{type:"float",bounds:[0,1],title:"DI-H6",default:1}},II:{1:{type:"float",bounds:[0,1],title:"DI-H1",default:1},2:{type:"float",bounds:[0,1],title:"DI-H2",default:1},3:{type:"float",bounds:[0,1],title:"DI-H3",default:1},4:{type:"float",bounds:[0,1],title:"DI-H4",default:1},5:{type:"float",bounds:[0,1],title:"DI-H5",default:1},6:{type:"float",bounds:[0,1],title:"DI-H6",default:1}},III:{1:{type:"float",bounds:[0,1],title:"DI-H1",default:1},2:{type:"float",bounds:[0,1],title:"DI-H2",default:1},3:{type:"float",bounds:[0,1],title:"DI-H3",default:1},4:{type:"float",bounds:[0,1],title:"DI-H4",default:1},5:{type:"float",bounds:[0,1],title:"DI-H5",default:1},6:{type:"float",bounds:[0,1],title:"DI-H6",default:1}},IV:{1:{type:"float",bounds:[0,1],title:"DI-H1",default:1},2:{type:"float",bounds:[0,1],title:"DI-H2",default:1},3:{type:"float",bounds:[0,1],title:"DI-H3",default:1},4:{type:"float",bounds:[0,1],title:"DI-H4",default:1},5:{type:"float",bounds:[0,1],title:"DI-H5",default:1},6:{type:"float",bounds:[0,1],title:"DI-H6",default:1}}}},x_to_end_prop:{type:"float",title:"Turn X Prop",bounds:[0,1],default:.05},y_to_mid_prop:{type:"float",title:"Turn Y Prop",bounds:[0,1],default:1/7},aa_area_perc_displacement:{type:"float",title:"Turn AA Disp",bounds:[0,1],default:.1},thickness:{type:"float",title:"Turn Thickness",bounds:[],default:.55},front_helix_stroke:{type:"color",title:"Front Helix Stroke",default:"black"},back_helix_stroke:{type:"color",title:"Back Helix Stroke",default:"black"},stroke_size:{type:"float",title:"Turn Stroke Size",bounds:[],default:1.5}}}},helix_region_width:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Helix Widths:",depth:2,subs:{I:{0:{type:"float",bounds:[0,1],title:"DI-H1",default:.02},1:{type:"float",bounds:[0,1],title:"DI-H2",default:.02},2:{type:"float",bounds:[0,1],title:"DI-H3",default:.02},3:{type:"float",bounds:[0,1],title:"DI-H4",default:.02},4:{type:"float",bounds:[0,1],title:"DI-H5",default:.02},5:{type:"float",bounds:[0,1],title:"DI-H6",default:.02}},II:{0:{type:"float",bounds:[0,1],title:"DII-H1",default:.02},1:{type:"float",bounds:[0,1],title:"DII-H2",default:.02},2:{type:"float",bounds:[0,1],title:"DII-H3",default:.02},3:{type:"float",bounds:[0,1],title:"DII-H4",default:.02},4:{type:"float",bounds:[0,1],title:"DII-H5",default:.02},5:{type:"float",bounds:[0,1],title:"DII-H6",default:.02}},III:{0:{type:"float",bounds:[0,1],title:"DIII-H1",default:.02},1:{type:"float",bounds:[0,1],title:"DIII-H2",default:.02},2:{type:"float",bounds:[0,1],title:"DIII-H3",default:.02},3:{type:"float",bounds:[0,1],title:"DIII-H4",default:.02},4:{type:"float",bounds:[0,1],title:"DIII-H5",default:.02},5:{type:"float",bounds:[0,1],title:"DIII-H6",default:.02}},IV:{0:{type:"float",bounds:[0,1],title:"DIV-H1",default:.02},1:{type:"float",bounds:[0,1],title:"DIV-H2",default:.02},2:{type:"float",bounds:[0,1],title:"DIV-H3",default:.02},3:{type:"float",bounds:[0,1],title:"DIV-H4",default:.02},4:{type:"float",bounds:[0,1],title:"DIV-H5",default:.02},5:{type:"float",bounds:[0,1],title:"DIV-H6",default:.02}}}},helix_region_height:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Helix Heights:",depth:2,subs:{I:{0:{type:"float",bounds:[0,1],title:"DI-H1",default:.4},1:{type:"float",bounds:[0,1],title:"DI-H2",default:.4},2:{type:"float",bounds:[0,1],title:"DI-H3",default:.4},3:{type:"float",bounds:[0,1],title:"DI-H4",default:.4},4:{type:"float",bounds:[0,1],title:"DI-H5",default:.4},5:{type:"float",bounds:[0,1],title:"DI-H6",default:.4}},II:{0:{type:"float",bounds:[0,1],title:"DII-H1",default:.4},1:{type:"float",bounds:[0,1],title:"DII-H2",default:.4},2:{type:"float",bounds:[0,1],title:"DII-H3",default:.4},3:{type:"float",bounds:[0,1],title:"DII-H4",default:.4},4:{type:"float",bounds:[0,1],title:"DII-H5",default:.4},5:{type:"float",bounds:[0,1],title:"DII-H6",default:.4}},III:{0:{type:"float",bounds:[0,1],title:"DIII-H1",default:.4},1:{type:"float",bounds:[0,1],title:"DIII-H2",default:.4},2:{type:"float",bounds:[0,1],title:"DIII-H3",default:.4},3:{type:"float",bounds:[0,1],title:"DIII-H4",default:.4},4:{type:"float",bounds:[0,1],title:"DIII-H5",default:.4},5:{type:"float",bounds:[0,1],title:"DIII-H6",default:.4}},IV:{0:{type:"float",bounds:[0,1],title:"DIV-H1",default:.4},1:{type:"float",bounds:[0,1],title:"DIV-H2",default:.4},2:{type:"float",bounds:[0,1],title:"DIV-H3",default:.4},3:{type:"float",bounds:[0,1],title:"DIV-H4",default:.4},4:{type:"float",bounds:[0,1],title:"DIV-H5",default:.4},5:{type:"float",bounds:[0,1],title:"DIV-H6",default:.4}}}},helix_spacing_width:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Helix Spacing Widths:",depth:2,subs:{I:{0:{type:"int",bounds:[],title:"DI-H1",default:5},1:{type:"int",bounds:[],title:"DI-H2",default:5},2:{type:"int",bounds:[],title:"DI-H3",default:5},3:{type:"int",bounds:[],title:"DI-H4",default:5},4:{type:"int",bounds:[],title:"DI-H5",default:5},5:{type:"int",bounds:[],title:"DI-H6",default:5}},II:{0:{type:"int",bounds:[],title:"DII-H1",default:5},1:{type:"int",bounds:[],title:"DII-H2",default:5},2:{type:"int",bounds:[],title:"DII-H3",default:5},3:{type:"int",bounds:[],title:"DII-H4",default:5},4:{type:"int",bounds:[],title:"DII-H5",default:5},5:{type:"int",bounds:[],title:"DII-H6",default:5}},III:{0:{type:"int",bounds:[],title:"DIII-H1",default:5},1:{type:"int",bounds:[],title:"DIII-H2",default:5},2:{type:"int",bounds:[],title:"DIII-H3",default:5},3:{type:"int",bounds:[],title:"DIII-H4",default:5},4:{type:"int",bounds:[],title:"DIII-H5",default:5},5:{type:"int",bounds:[],title:"DIII-H6",default:5}},IV:{0:{type:"int",bounds:[],title:"DIV-H1",default:5},1:{type:"int",bounds:[],title:"DIV-H2",default:5},2:{type:"int",bounds:[],title:"DIV-H3",default:5},3:{type:"int",bounds:[],title:"DIV-H4",default:5},4:{type:"int",bounds:[],title:"DIV-H5",default:5},5:{type:"int",bounds:[],title:"DIV-H6",default:5}}}},short_loops_draw_opts:{type:"dict",title:"Short Loops Rendering",pad:"0px",cpad:"8px",subs:{type:"skip",fill:"skip",stroke:{type:"color",title:"S-Loop Stroke Fill:",default:"black"},opacity:{type:"float",bounds:[0,1],title:"S-Loop Opacity",default:1},stroke_size:{type:"int",bounds:[],title:"S-Loop Stroke Size",default:3},calc_len:{type:"dict",title:"Length Calc.",pad:"0px",cpad:"8px",subs:{type:{type:"select",title:"Calc Mode:",options:["fixed","custom","scaled","reslen"],updatable:{type:!0,select_id:"protein>short_loops_draw_opts>calc_len>calc"}},calc:{type:"relative_dict",pad:"0px",cpad:"8px",title:"Calc Options:",select_id:"protein>short_loops_draw_opts>calc_len>type",subs:{fixed:{height:{type:"float",bounds:[0,1],title:"S-Loop Height",default:.1},width:{type:"float",bounds:[0,1],title:"S-Loop Width",default:.0025}},scaled:{height:{type:"float",bounds:[0,1],title:"S-Loop max Height",default:.1},width:{type:"float",bounds:[0,1],title:"S-Loop max Width",default:.0025},scale:{type:"select",title:"S-Loop Scale Type",options:["linear","power","log"],updatable:{type:!1}},exponent:{type:"int",bounds:[],title:"Power Scale exponent",default:2},base:{type:"int",bounds:[],title:"Log Scale base",default:10}},reslen:{length:{type:"int",bounds:[],title:"S-Loop Length",default:2}},custom:{width:{type:"composed_dict",title:"Short-Loop Widths:",pad:"0px",cpad:"8px",depth:2,subs:{I:{0:{type:"float",bounds:[0,1],title:"DI-SL1",default:.01},1:{type:"float",bounds:[0,1],title:"DI-SL2",default:.01},2:{type:"float",bounds:[0,1],title:"DI-SL3",default:.01},3:{type:"float",bounds:[0,1],title:"DI-SL4",default:.01},4:{type:"float",bounds:[0,1],title:"DI-SL5",default:.01},5:{type:"float",bounds:[0,1],title:"DI-SL6",default:.01},6:{type:"float",bounds:[0,1],title:"DI-SL7",default:.01}},II:{0:{type:"float",bounds:[0,1],title:"DI-SL1",default:.01},1:{type:"float",bounds:[0,1],title:"DI-SL2",default:.01},2:{type:"float",bounds:[0,1],title:"DI-SL3",default:.01},3:{type:"float",bounds:[0,1],title:"DI-SL4",default:.01},4:{type:"float",bounds:[0,1],title:"DI-SL5",default:.01},5:{type:"float",bounds:[0,1],title:"DI-SL6",default:.01},6:{type:"float",bounds:[0,1],title:"DI-SL7",default:.01}},III:{0:{type:"float",bounds:[0,1],title:"DI-SL1",default:.01},1:{type:"float",bounds:[0,1],title:"DI-SL2",default:.01},2:{type:"float",bounds:[0,1],title:"DI-SL3",default:.01},3:{type:"float",bounds:[0,1],title:"DI-SL4",default:.01},4:{type:"float",bounds:[0,1],title:"DI-SL5",default:.01},5:{type:"float",bounds:[0,1],title:"DI-SL6",default:.01},6:{type:"float",bounds:[0,1],title:"DI-SL7",default:.01}},IV:{0:{type:"float",bounds:[0,1],title:"DI-SL1",default:.01},1:{type:"float",bounds:[0,1],title:"DI-SL2",default:.01},2:{type:"float",bounds:[0,1],title:"DI-SL3",default:.01},3:{type:"float",bounds:[0,1],title:"DI-SL4",default:.01},4:{type:"float",bounds:[0,1],title:"DI-SL5",default:.01},5:{type:"float",bounds:[0,1],title:"DI-SL6",default:.01},6:{type:"float",bounds:[0,1],title:"DI-SL7",default:.01}}}},height:{type:"composed_dict",title:"Short-Loop Heights:",pad:"0px",cpad:"8px",depth:2,subs:{I:{0:{type:"float",bounds:[0,1],title:"DI-SL1",default:.1},1:{type:"float",bounds:[0,1],title:"DI-SL2",default:.1},2:{type:"float",bounds:[0,1],title:"DI-SL3",default:.1},3:{type:"float",bounds:[0,1],title:"DI-SL4",default:.1},4:{type:"float",bounds:[0,1],title:"DI-SL5",default:.1},5:{type:"float",bounds:[0,1],title:"DI-SL6",default:.1},6:{type:"float",bounds:[0,1],title:"DI-SL7",default:.1}},II:{0:{type:"float",bounds:[0,1],title:"DI-SL1",default:.1},1:{type:"float",bounds:[0,1],title:"DI-SL2",default:.1},2:{type:"float",bounds:[0,1],title:"DI-SL3",default:.1},3:{type:"float",bounds:[0,1],title:"DI-SL4",default:.1},4:{type:"float",bounds:[0,1],title:"DI-SL5",default:.1},5:{type:"float",bounds:[0,1],title:"DI-SL6",default:.1},6:{type:"float",bounds:[0,1],title:"DI-SL7",default:.1}},III:{0:{type:"float",bounds:[0,1],title:"DI-SL1",default:.1},1:{type:"float",bounds:[0,1],title:"DI-SL2",default:.1},2:{type:"float",bounds:[0,1],title:"DI-SL3",default:.1},3:{type:"float",bounds:[0,1],title:"DI-SL4",default:.1},4:{type:"float",bounds:[0,1],title:"DI-SL5",default:.1},5:{type:"float",bounds:[0,1],title:"DI-SL6",default:.1},6:{type:"float",bounds:[0,1],title:"DI-SL7",default:.1}},IV:{0:{type:"float",bounds:[0,1],title:"DI-SL1",default:.1},1:{type:"float",bounds:[0,1],title:"DI-SL2",default:.1},2:{type:"float",bounds:[0,1],title:"DI-SL3",default:.1},3:{type:"float",bounds:[0,1],title:"DI-SL4",default:.1},4:{type:"float",bounds:[0,1],title:"DI-SL5",default:.1},5:{type:"float",bounds:[0,1],title:"DI-SL6",default:.1},6:{type:"float",bounds:[0,1],title:"DI-SL7",default:.1}}}}}}}}},shape:{type:"dict",title:"Loop Shape:",pad:"0px",cpad:"8px",child_centering:"right",subs:{type:{type:"select",title:"Shape Type:",options:["simple","swirl","bulb","mushroom"],updatable:{type:!0,select_id:"protein>short_loops_draw_opts>shape>calc"}},calc:{type:"relative_dict",title:"Shape Calc:",pad:"0px",cpad:"8px",select_id:"protein>short_loops_draw_opts>shape>type",subs:{simple:{y_step:{type:"float",bounds:[],title:"Y step:",default:.5}},swirl:{y_step:{type:"float",bounds:[],title:"Y step:",default:.5},perc_step_y:{type:"float",bounds:[0,1],title:"Perc Y step:",default:.5},swirl_x:{type:"float",bounds:[],title:"X Swirl:",default:1}},bulb:{y_step:{type:"float",bounds:[],title:"Y step:",default:.5},perc_step_y:{type:"float",bounds:[0,1],title:"Perc Y step:",default:.5},x_step:{type:"float",bounds:[],title:"X step:",default:.5}},mushroom:{y_step:{type:"float",bounds:[],title:"Y step:",default:.5},perc_step_y1:{type:"float",bounds:[0,1],title:"Perc Y1 step:",default:.1},perc_step_y2:{type:"float",bounds:[0,1],title:"Perc Y2 step:",default:.5},x_step:{type:"float",bounds:[],title:"X step:",default:.5},perc_center_x:{type:"float",bounds:[0,1],title:"Perc X center:",default:.7}}}}}}}},pore_loops_draw_opts:{type:"dict",title:"Pore Loops Rendering",pad:"0px",cpad:"8px",subs:{type:"skip",fill:"skip",stroke:{type:"color",title:"P-Loop Stroke Fill:",default:"black"},opacity:{type:"float",bounds:[0,1],title:"P-Loop Opacity",default:1},stroke_size:{type:"int",bounds:[],title:"P-Loop Stroke Size",default:3},calc_len:{type:"dict",title:"Length Calc.",pad:"0px",cpad:"8px",subs:{type:{type:"select",title:"Calc Mode:",options:["fixed","scaled","reslen"],updatable:{type:!0,select_id:"protein>pore_loops_draw_opts>calc_len>calc"}},calc:{type:"relative_dict",pad:"0px",cpad:"8px",title:"Calc Opts:",select_id:"protein>pore_loops_draw_opts>calc_len>type",subs:{fixed:{height:{type:"float",bounds:[0,1],title:"P-Loop Height",default:.1},width:{type:"float",bounds:[0,1],title:"P-Loop Width",default:.0025}},scaled:{height:{type:"float",bounds:[0,1],title:"P-Loop max Height",default:.1},width:{type:"float",bounds:[0,1],title:"P-Loop max Width",default:.0025},scale:{type:"select",title:"P-Loop Scale Type",options:["linear","power","log"],updatable:{type:!1}},exponent:{type:"int",bounds:[],title:"Power Scale exponent",default:2},base:{type:"int",bounds:[],title:"Log Scale base",default:10}},reslen:{length:{type:"int",bounds:[],title:"P-Loop Length",default:2}}}}}},shape:{type:"dict",title:"Loop Shape:",pad:"0px",cpad:"8px",subs:{type:"skip",calc:{type:"dict",title:"Loop Shape Calc:",pad:"0px",cpad:"8px",subs:{y_step:{type:"float",bounds:[],title:"Y step:",default:.5},perc_center_x:{type:"float",bounds:[0,1],title:"Perc X Center:",default:0}}}}}}},pore_region_width:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Pore-Loop Area Width:",depth:1,subs:{I:{type:"float",bounds:[0,1],title:"DI-P",default:.01},II:{type:"float",bounds:[0,1],title:"DI-P",default:.01},III:{type:"float",bounds:[0,1],title:"DI-P",default:.01},IV:{type:"float",bounds:[0,1],title:"DI-P",default:.01}}},pore_region_height:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Pore-Loop Area Height:",depth:1,subs:{I:{type:"float",bounds:[0,1],title:"DI-P",default:.4},II:{type:"float",bounds:[0,1],title:"DI-P",default:.4},III:{type:"float",bounds:[0,1],title:"DI-P",default:.4},IV:{type:"float",bounds:[0,1],title:"DI-P",default:.4}}},long_loops_draw_opts:{type:"dict",title:"Long Loops Rendering",pad:"0px",cpad:"8px",subs:{type:"skip",fill:"skip",stroke:{type:"color",title:"L-Loop Stroke Fill:",default:"black"},opacity:{type:"float",bounds:[0,1],title:"L-Loop Opacity",default:1},stroke_size:{type:"int",bounds:[],title:"L-Loop Stroke Size",default:3},width:{type:"dict",title:"Interdomain Width.",pad:"0px",cpad:"8px",subs:{type:{type:"select",title:"Calc Mode:",options:["fixed","custom","scaled"],updatable:{type:!1}}}},calc_len:{type:"dict",title:"Length Calc.",pad:"0px",cpad:"8px",subs:{type:{type:"select",title:"Calc Mode:",options:["fixed","custom","scaled","reslen"],updatable:{type:!0,select_id:"protein>long_loops_draw_opts>calc_len>calc"}},calc:{type:"relative_dict",pad:"0px",cpad:"8px",title:"Calc Options:",select_id:"protein>long_loops_draw_opts>calc_len>type",subs:{fixed:{height:{type:"float",bounds:[0,1],title:"L-Loop Height",default:.1},width:{type:"float",bounds:[0,1],title:"L-Loop Width",default:.0025}},scaled:{height:{type:"float",bounds:[0,1],title:"L-Loop max Height",default:.1},width:{type:"float",bounds:[0,1],title:"L-Loop max Width",default:.0025},scale:{type:"select",title:"S-Loop Scale Type",options:["linear","power","log"],updatable:{type:!1}},exponent:{type:"int",bounds:[],title:"Power Scale exponent",default:2},base:{type:"int",bounds:[],title:"Log Scale base",default:10}},reslen:{length:{type:"int",bounds:[],title:"L-Loop Length",default:2}},custom:{width:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Long-Loop Widths:",depth:1,subs:{2:{type:"float",bounds:[0,1],title:"DI-LL1",default:.01},3:{type:"float",bounds:[0,1],title:"DI-LL2",default:.01},4:{type:"float",bounds:[0,1],title:"DI-LL3",default:.01}}},height:{type:"composed_dict",pad:"0px",cpad:"8px",title:"Long-Loop Heights:",depth:1,subs:{2:{type:"float",bounds:[0,1],title:"DI-LL1",default:.1},3:{type:"float",bounds:[0,1],title:"DI-LL2",default:.1},4:{type:"float",bounds:[0,1],title:"DI-LL3",default:.1}}}}}}}},shape:{type:"dict",title:"Loop Shape:",pad:"0px",cpad:"8px",subs:{type:{type:"select",title:"Shape Type:",options:["simple","bulb","mushroom"],updatable:{type:!0,select_id:"protein>long_loops_draw_opts>shape>calc"}},calc:{type:"relative_dict",pad:"0px",cpad:"8px",title:"Shape Calc:",select_id:"protein>long_loops_draw_opts>shape>type",subs:{simple:{y_step:{type:"float",bounds:[],title:"Y step:",default:.5}},bulb:{y_step:{type:"float",bounds:[],title:"Y step:",default:.5},perc_step_y:{type:"float",bounds:[0,1],title:"Perc Y step:",default:.5},x_step:{type:"float",bounds:[],title:"X step:",default:.5}},mushroom:{y_step:{type:"float",bounds:[],title:"Y step:",default:.5},perc_step_y1:{type:"float",bounds:[0,1],title:"Perc Y1 step:",default:.1},perc_step_y2:{type:"float",bounds:[0,1],title:"Perc Y2 step:",default:.5},x_step:{type:"float",bounds:[],title:"X step:",default:.5},perc_center_x:{type:"float",bounds:[0,1],title:"Perc X center:",default:.7}}}}}}}},nter_loop_width:{type:"float",bounds:[0,1],title:"N-ter Loop Area Width",default:.05},nter_loop_draw_opts:{type:"dict",title:"N-ter Loop Rendering",pad:"0px",cpad:"8px",subs:{type:"skip",fill:"skip",stroke:{type:"color",title:"N-ter Loop Stroke Fill:",default:"black"},opacity:{type:"float",bounds:[0,1],title:"N-ter Loop Opacity",default:1},stroke_size:{type:"int",bounds:[],title:"N-ter Loop Stroke Size",default:3},calc_len:{type:"dict",title:"Length Calc.",pad:"0px",cpad:"8px",subs:{type:{type:"select",title:"Calc Mode:",options:["fixed","reslen"],updatable:{type:!0,select_id:"protein>nter_loop_draw_opts>calc_len>calc"}},calc:{type:"relative_dict",pad:"0px",cpad:"8px",title:"Calc Opts:",select_id:"protein>nter_loop_draw_opts>calc_len>type",subs:{fixed:{height:{type:"float",bounds:[0,1],title:"N-ter Loop Height",default:.1},width:{type:"float",bounds:[0,1],title:"N-ter Loop Width",default:.0025}},reslen:{length:{type:"int",bounds:[],title:"N-ter Loop Length",default:2}}}}}},shape:{type:"dict",title:"Loop Shape:",pad:"0px",cpad:"8px",subs:{type:"skip",calc:{type:"dict",title:"Loop Shape Calc:",pad:"0px",cpad:"8px",subs:{y_step:{type:"float",bounds:[],title:"Y step:",default:.5},perc_centers_height:{type:"array",subtype:"float",bounds:[],title:"Wave heights",default:[1,.5]},loop_rotation:{type:"float",bounds:[0,360],title:"Loop angle:",default:30}}}}}}},cter_loop_width:{type:"float",bounds:[0,1],title:"C-ter Loop Area Width",default:.05},cter_loop_draw_opts:{type:"dict",title:"C-ter Loop Rendering",pad:"0px",cpad:"8px",subs:{type:"skip",fill:"skip",stroke:{type:"color",title:"C-ter Loop Stroke Fill:",default:"black"},opacity:{type:"float",bounds:[0,1],title:"C-ter Loop Opacity",default:1},stroke_size:{type:"int",bounds:[],title:"C-ter Loop Stroke Size",default:3},calc_len:{type:"dict",title:"Length Calc.",pad:"0px",cpad:"8px",subs:{type:{type:"select",title:"Calc Mode:",options:["fixed","reslen"],updatable:{type:!0,select_id:"protein>cter_loop_draw_opts>calc_len>calc"}},calc:{type:"relative_dict",pad:"0px",cpad:"8px",title:"Calc Opts:",select_id:"protein>cter_loop_draw_opts>calc_len>type",subs:{fixed:{height:{type:"float",bounds:[0,1],title:"C-ter Loop Height",default:.1},width:{type:"float",bounds:[0,1],title:"C-ter Loop Width",default:.0025}},reslen:{length:{type:"int",bounds:[],title:"C-ter Loop Length",default:2}}}}}},shape:{type:"dict",title:"Loop Shape:",pad:"0px",cpad:"8px",subs:{type:"skip",calc:{type:"dict",title:"Loop Shape Calc:",pad:"0px",cpad:"8px",subs:{y_step:{type:"float",bounds:[],title:"Y step:",default:.5},perc_centers_height:{type:"array",subtype:"float",bounds:[],title:"Wave heights",default:[1,.8,.5,.4]},loop_rotation:{type:"float",bounds:[0,360],title:"Loop angle:",default:-30}}}}}}},residue_centroid_draw_opts:{type:"skip"},residue_relations_draw_opts:{type:"dict",title:"Relations Rendering",pad:"0px",cpad:"8px",subs:{type:"skip",opacity:{type:"float",bounds:[0,1],title:"Edge Opacity",default:1},stroke_size:{type:"int",bounds:[],title:"Edge Stroke Size",default:1.5},stroke:{type:"color",title:"Edge Stroke Fill:",default:"green"},fill:{type:"color",title:"Edge Fill:",default:"lightgreen"},centroid_pos:{type:"dict",title:"Edge Centroid Pos Opts:",pad:"0px",cpad:"8px",subs:{type:{type:"select",title:"Edge Weight Scaling:",options:["fixed","custom"],updatable:{type:!1}},perc_x:{type:"floatWString",title:"Fixed Edge Cent X Pos",bounds:[0,1],default:"between",allow:["between"]},perc_y:{type:"floatWString",title:"Fixed Edge Cent Y Pos",bounds:[0,1],default:"between",allow:["between"]},perc_dict:{type:"dict",title:"Custom Edges Centroid:",pad:"0px",cpad:"8px",subs:{intramembrane:{type:"dict",title:"From Intramembranar element:",pad:"0px",cpad:"8px",subs:{intramembrane:{type:"dict",title:"To Intramembranar element",pad:"0px",cpad:"8px",subs:{perc_y1:{type:"floatWString",title:"Edge Cent Y Pos",bounds:[0,1],default:"between",allow:["between"]},perc_x1:{type:"floatWString",title:"Edge Cent X Pos",bounds:[0,1],default:"between",allow:["between"]}}},intracellular:{type:"dict",title:"To Intracellular element",pad:"0px",cpad:"8px",subs:{perc_y1:{type:"floatWString",title:"Edge Cent Y Pos",bounds:[0,1],default:"between",allow:["between"]},perc_x1:{type:"floatWString",title:"Edge Cent X Pos",bounds:[0,1],default:"between",allow:["between"]}}},extracellular:{type:"dict",title:"To Extracellular element",pad:"0px",cpad:"8px",subs:{perc_y1:{type:"floatWString",title:"Edge Cent Y Pos",bounds:[0,1],default:"between",allow:["between"]},perc_x1:{type:"floatWString",title:"Edge Cent X Pos",bounds:[0,1],default:"between",allow:["between"]}}}}},intracellular:{type:"dict",title:"From Intracellular element:",pad:"0px",cpad:"8px",subs:{intramembrane:{type:"dict",title:"To Intramembranar element",pad:"0px",cpad:"8px",subs:{perc_y1:{type:"floatWString",title:"Edge Cent Y Pos",bounds:[0,1],default:"between",allow:["between"]},perc_x1:{type:"floatWString",title:"Edge Cent X Pos",bounds:[0,1],default:"between",allow:["between"]}}},intracellular:{type:"dict",title:"To Intracellular element",pad:"0px",cpad:"8px",subs:{perc_y1:{type:"floatWString",title:"Edge Cent Y Pos",bounds:[0,1],default:"between",allow:["between"]},perc_x1:{type:"floatWString",title:"Edge Cent X Pos",bounds:[0,1],default:"between",allow:["between"]}}},extracellular:{type:"dict",title:"To Extracellular element",pad:"0px",cpad:"8px",subs:{perc_y1:{type:"floatWString",title:"Edge Cent Y Pos",bounds:[0,1],default:"between",allow:["between"]},perc_x1:{type:"floatWString",title:"Edge Cent X Pos",bounds:[0,1],default:"between",allow:["between"]}}}}},extracellular:{type:"dict",title:"From Extracellular element:",pad:"0px",cpad:"8px",subs:{intramembrane:{type:"dict",title:"To Intramembranar element",pad:"0px",cpad:"8px",subs:{perc_y1:{type:"floatWString",title:"Edge Cent Y Pos",bounds:[0,1],default:"between",allow:["between"]},perc_x1:{type:"floatWString",title:"Edge Cent X Pos",bounds:[0,1],default:"between",allow:["between"]}}},intracellular:{type:"dict",title:"To Intracellular element",pad:"0px",cpad:"8px",subs:{perc_y1:{type:"floatWString",title:"Edge Cent Y Pos",bounds:[0,1],default:"between",allow:["between"]},perc_x1:{type:"floatWString",title:"Edge Cent X Pos",bounds:[0,1],default:"between",allow:["between"]}}},extracellular:{type:"dict",title:"To Extracellular element",pad:"0px",cpad:"8px",subs:{perc_y1:{type:"floatWString",title:"Edge Cent Y Pos",bounds:[0,1],default:"between",allow:["between"]},perc_x1:{type:"floatWString",title:"Edge Cent X Pos",bounds:[0,1],default:"between",allow:["between"]}}}}}}}}},weight_scaling:{type:"select",title:"Edge Weight Scale Type:",options:["absolute","relative"],updatable:{type:!1}},path_width_scaling:{type:"dict",title:"Edge Width Scales:",pad:"0px",cpad:"8px",subs:{type:{type:"select",title:"Edge Weight Scale:",options:["none","fixed","calc"],updatable:{type:!1}},perc_x:{type:"float",title:"Edge Width for fixed",bounds:[0,1],default:.01},domain:{type:"arrayConnected",title:"Width Scale Domain",select_id:"protein>residue_relations_draw_opts>path_width_scaling>range",default:["min","max"],subtype:"floatWString",bounds:[0,1],allow:["min","max"]},range:{type:"arrayConnected",title:"Width Scale Range",select_id:"protein>residue_relations_draw_opts>path_width_scaling>domain",default:[2,5],subtype:"float",bounds:[]},group_by_type:{type:"boolean",title:"Group Weights by Edge type?",default:!0}}},color_scaling:{type:"dict",title:"Edge Color Scales:",pad:"0px",cpad:"8px",subs:{type:{type:"select",title:"Edge Color Scale:",options:["weight","type","none"],updatable:{type:!1},custom_update:{select_id:["protein>residue_relations_draw_opts>color_scaling>domain","protein>residue_relations_draw_opts>color_scaling>range"]}},property:{default:"weight"},domain:{type:"arrayConnectedAccording",title:"Color Scale Domain",select_id:"protein>residue_relations_draw_opts>color_scaling>range",according_id:"protein>residue_relations_draw_opts>color_scaling>type",default:["min","max"],subtype:{weight:"floatWString",type:"text",none:""},defaults:{weight:["min","max"],type:["Change this","Change this"]},bounds:[0,1],allow:["min","max"]},range:{type:"arrayConnectedAccording",title:"Color Scale Range",select_id:"protein>residue_relations_draw_opts>color_scaling>domain",according_id:"protein>residue_relations_draw_opts>color_scaling>type",subtype:{weight:"color",type:"color",none:""},defaults:{weight:["lightblue","blue"],type:["lightblue","blue"]}},lighter_fill:{type:"boolean",title:"Auto lighten Edge Fill?",default:!0}}},element_centroid_scaling:{type:"dict",title:"Centroid Scaling",pad:"0px",cpad:"8px",subs:{type:{type:"select",title:"Edge Centroid Scale:",options:["fixed","none"],updatable:{type:!1}},radius:{default:5}}}}}}},text_defs:{type:"dict",title:"Text defaults",pad:"0px",cpad:"8px",subs:{font_family:{type:"text",title:"Default Font family",default:"sans-serif"},font_style:{type:"select",title:"Default Font style",options:["normal","italic"],updatable:{type:!1}},font_size:{type:"int",bounds:[],title:"Default Font size",default:30},fill:{type:"color",title:"Default Font color",default:"black"},center_xy:{type:"boolean",title:"Center text on coordinates?",default:!0}}}},this.main_style_keys=Object.keys(this.naview_obj.getStyleObject()),this.style_obj_copy=this.deepCopy(this.naview_obj.getStyleObject()),this.createEditor()}retrieveSubKeysStyleObj(t){let e=this.naview_obj.getStyleObject();if(t.includes(">")){let l=t.split(">");for(let t=0;t<l.length;t++){e=e[l[t]]}}else e=e[t];return Object.keys(e)}retrieveSubObjStyleObj(t){let e=this.naview_obj.getStyleObject();if(t.includes(">")){let l=t.split(">");for(let t=0;t<l.length;t++){let o=l[t];e.hasOwnProperty(o)&&(e=e[o])}}else e=e[t];return e}setCopyObjStyle(t,e,l){let o=this.style_obj_copy;if(t.includes(">")){let a=t.split(">"),d=a[a.length-1];a=a.slice(0,a.length-1);for(let t=0;t<a.length;t++){let e=a[t];o.hasOwnProperty(e)&&(o=o[e])}l&&(console.log("found k"),console.log("end_key"),console.log(d),console.log("value"),console.log(e)),o[d]=e}else l&&(console.log("found k"),console.log("key"),console.log(t),console.log("value"),console.log(e)),o[t]=e}createEditor(){let t=d3.select("#"+this.editor_id);if(0===t.size()){let e=this.naview_obj.bbox;console.log("svg_box"),console.log(e),(t=d3.select("body").append("div").attr("id",this.editor_id)).style("position","absolute"),t.style("top",e.top+e.height/4+"px"),t.style("left",e.left+.8*e.width+"px"),t.style("z-index","5"),t.style("max-width","250px"),t.style("min-width","250px"),t.style("background-color","#000000bf"),t.style("font-family","monospace"),t.style("font-size","15px"),t.style("color","white"),t.style("max-height","70%"),t.style("overflow-y","scroll"),t.style("overflow-y","scroll"),this.createDropDown(t,"Naview Style Editor ",this.editor_id,!0,"center","5px","5px"),this.createMainDiv();let l=this,o=d3.select("#"+this.editor_id+"main_editor").append("div").style("text-align","center");o.append("button").style("width","150px").style("background-color","#4c4b4b").style("border-radius","6px").style("cursor","pointer").style("color","white").style("font-size","15px").style("padding","6px ").style("text-decoration","none").html("&#8635; Update Plot").on("click",function(){l.sendToNaViewObj()}),o.append("br"),o.append("button").style("width","150px").style("background-color","#4c4b4b").style("border-radius","6px").style("cursor","pointer").style("color","white").style("font-size","15px").style("padding","6px ").style("text-decoration","none").html("&#10093; Open Console").on("click",function(){l.openConsole()}),o.append("br"),o.append("input").attr("id","input_csv").attr("type","file").attr("accept",".csv").style("visibility","hidden").style("width","0").style("height","0").on("input",function(){let t=d3.select(this).property("files");const e=new FileReader;e.addEventListener("load",t=>{const e=t.target.result;l.uploadProperties(e)});for(const l of t)e.readAsText(l)}),o.append("button").style("width","150px").style("background-color","#4c4b4b").style("border-radius","6px").style("cursor","pointer").style("color","white").style("font-size","15px").style("padding","6px ").style("text-decoration","none").html("&#11014; Add Prop. CSV").on("click",function(){var t=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0});document.getElementById("input_csv").dispatchEvent(t)}),o.append("br"),o.append("input").attr("id","input_csv2").attr("type","file").attr("accept",".csv").style("visibility","hidden").style("width","0").style("height","0").on("input",function(){let t=d3.select(this).property("files");const e=new FileReader;e.addEventListener("load",t=>{const e=t.target.result;l.uploadRelations(e)});for(const l of t)e.readAsText(l)}),o.append("button").style("width","150px").style("background-color","#4c4b4b").style("border-radius","6px").style("cursor","pointer").style("color","white").style("font-size","15px").style("padding","6px ").style("text-decoration","none").html("&#11014; Add Rel. CSV").on("click",function(){var t=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0});document.getElementById("input_csv2").dispatchEvent(t)}),o.append("br"),o.append("button").style("width","150px").style("background-color","#4c4b4b").style("border-radius","6px").style("cursor","pointer").style("color","white").style("font-size","15px").style("padding","6px ").style("text-decoration","none").html("&#11015; Style Object").on("click",function(){l.downloadStyleObject()}),o.append("br"),o.append("button").style("width","150px").style("background-color","#4c4b4b").style("border-radius","6px").style("cursor","pointer").style("color","white").style("font-size","15px").style("padding","6px ").style("text-decoration","none").html("&#11015; Img as SVG ").on("click",function(){l.downloadImage("svg")}),o.append("br"),o.append("button").style("width","150px").style("background-color","#4c4b4b").style("border-radius","6px").style("cursor","pointer").style("color","white").style("font-size","15px").style("padding","6px ").style("text-decoration","none").html("&#11015; Img as PNG").on("click",function(){l.downloadImage("png")}),d3.selectAll(".select_to_trigger").dispatch("change")}}createMainDiv(){for(let t=0;t<this.main_style_keys.length;t++){let e=this.main_style_keys[t];this.elementCreator(e,this.editor_id+"main_editor")}}createDropDown(t,e,l,o,a,d,i){!1===e.endsWith(":")&&"Style Object Editor "!==e&&(e+=":");let s=t.append("div").style("text-align",a).style("padding-left",d);s.append("div").style("text-align",a).style("display","inline").append("span").style("user-select","none").html(e),s.append("span").attr("id",l+"id_status").style("cursor","pointer").style("user-select","none").html("&#9660;").style("right","0").datum({opened:!1}).on("click",function(t){let e=t.opened&&!0;!1===e?(d3.select("#"+l+"id_status").html("&#9650;"),d3.select("#"+l+"main_editor").style("display","")):(d3.select("#"+l+"id_status").html("&#9660;"),d3.select("#"+l+"main_editor").style("display","none")),d3.select(this).datum({opened:!e})}),!0===o&&s.append("span").attr("id",l+"close_editor").style("cursor","pointer").style("user-select","none").html("&#10006;").on("click",function(){d3.select("#"+l).remove()});t.append("div").attr("id",l+"main_editor").style("display","none").style("text-align","left").style("padding-left",i),t.append("br")}createSelect(t,e,l,o,a,d,i,s){let p=this.deepCopy(d);p.update_id=s,p.value=a,i.hasOwnProperty("custom_update")&&(p.custom_update=i.custom_update),!1===e.endsWith(":")&&(e+=":");let n=t.append("div");n.append("span").style("user-select","none").html(e),n.append("br");let r=n.append("div").style("text-align","center"),u=this;u.setCopyObjStyle(s,a);let c=r.append("select").attr("id",l+"_element").attr("class","select_to_trigger").style("border-radius","6px").style("background-color","#404040").style("color","white").style("margin","5px").style("padding","2px").style("font-size","15px").datum(p).on("change",function(t){var e=d3.select(this).property("value");let o=u.deepCopy(d3.select("#"+l+"_element").datum());if(o.value=e,d3.select("#"+l+"_element").datum(o),t.hasOwnProperty("custom_update"))if(t.custom_update.select_id instanceof Array){let e=t.custom_update.select_id[0].replaceAll(">","_")+"_hidden_update_btn",l=t.custom_update.select_id[1].replaceAll(">","_")+"_hidden_update_btn";d3.select("#"+e).dispatch("click"),d3.select("#"+l).dispatch("click")}else{let e=t.custom_update.select_id.replaceAll(">","_")+"_hidden_update_btn";d3.select("#"+e).dispatch("click")}if(u.setCopyObjStyle(s,e),!0===t.type){let l=t.select_id.replaceAll(">","_")+"main_editor";d3.select("#"+l).html("");let o=u.retrieveStyleHTMLFromKeys(t.select_id).subs[e];for(const a in o)if(o.hasOwnProperty(a)){o[a];let d=t.select_id+">"+e+">"+a,i=t.select_id+">"+a;u.elementCreator(d,l,i)}}});for(let t=0;t<o.length;t++){let e=o[t],l=c.append("option").attr("value",e).html(e);e===a&&l.attr("selected","selected")}c.dispatch("change")}createFloatSpinner(t,e,l,o,a,d,i){let s={};s.update_id=i,o=parseFloat(o),!1===e.endsWith(":")&&(e+=":");let p=t.append("div");p.append("span").style("user-select","none").html(e),p.append("br");let n=p.append("div").style("text-align","center"),r=this;r.setCopyObjStyle(i,o);let u=n.append("input").datum(s).attr("id",l+"_element").attr("type","number").style("border-radius","6px").style("background-color","#404040").style("color","white").attr("step",.1).style("width","4.5em").attr("value",o).on("change",function(t){console.log("changed spinner");let e=parseFloat(d3.select(this).property("value"));r.setCopyObjStyle(i,e)});a&&u.attr("min",a[0]).attr("max",a[1]),d&&p.append("br")}createIntSpinner(t,e,l,o,a,d,i){let s={};s.update_id=i,o=parseInt(o),!1===e.endsWith(":")&&(e+=":");let p=t.append("div");p.append("span").style("user-select","none").html(e),p.append("br");let n=p.append("div").style("text-align","center"),r=this;r.setCopyObjStyle(i,o);let u=n.append("input").datum(s).attr("id",l+"_element").attr("type","number").style("border-radius","6px").style("background-color","#404040").style("color","white").attr("step",1).style("width","4.5em").attr("value",o).on("change",function(t){console.log("changed spinner");let e=parseInt(d3.select(this).property("value"));r.setCopyObjStyle(i,e)});a&&u.attr("min",a[0]).attr("max",a[1]),d&&p.append("br")}createColorInput(t,e,l,o,a,d){let i={};i.update_id=d,o=this.colorToRGB(o),o=this.rgbToHex(o[0],o[1],o[2]);let s=t.append("div");!1===e.endsWith(":")&&(e+=":"),s.append("span").style("user-select","none").html(e),s.append("br");let p=s.append("div").style("text-align","center"),n=this;n.setCopyObjStyle(d,o);p.append("input").datum(i).attr("id",l+"_element").attr("type","color").style("border-radius","3px").style("background-color","#ffffff00").style("padding","0px").style("width","4em").style("height","2em").style("border-color","#ffffff00").attr("value",o).on("change",function(t){console.log("changed color");let e=d3.select(this).property("value");n.setCopyObjStyle(d,e)});a&&s.append("br")}createCheckBox(t,e,l,o,a,d){let i={};i.update_id=d,!1===e.endsWith(":")&&!1===e.endsWith("?")&&(e+=":");let s=t.append("div");s.append("span").style("user-select","none").html(e),s.append("br");let p=s.append("div").style("text-align","center"),n=this;n.setCopyObjStyle(d,o);let r=p.append("input").datum(i).attr("id",l+"_element").attr("type","checkbox").attr("name",o).on("change",function(t){console.log("changed color");let e=d3.select(this).property("checked")&&!0;n.setCopyObjStyle(d,e)});o?r.property("checked",!0):r.property("checked",!1),a&&s.append("br")}createArrayEditor(t,e,l,o,a,d,i){let s={},p=this;s.update_id=i,s.array=o,!1===e.endsWith(":")&&(e+=":");let n=t.append("div").datum(s);if(n.append("span").style("user-select","none").html(e),n.append("br"),"float"===a.subtype){let t=n.append("div").style("text-align","center");!function e(o){p.setCopyObjStyle(i,o),t.html(""),t.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","20px").attr("value","+").on("click",function(){let t=p.deepCopy(n.datum().array);t.push(.5),n.datum().array=t,e(t)}),t.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","20px").attr("value","-").on("click",function(){let t=p.deepCopy(n.datum().array);t.length>1&&(t.pop(),n.datum().array=t,e(t))}),t.append("br"),t.append("div").attr("id",l+"_element").style("display","inline").style("text-align","left").selectAll(".input_array"+l).data(o).enter().append("input").attr("class","input_array"+l).attr("type","number").style("border-radius","6px").style("background-color","#404040").style("color","white").attr("step",.1).style("width","4.5em").attr("value",function(t){return t}).attr("min",a.bounds[0]).attr("max",a.bounds[1]).on("change",function(t,e){console.log("changed value");let o=p.deepCopy(n.datum().array);o[e]=parseFloat(d3.select(this).property("value")),n.datum().array=o,d3.selectAll(".input_array"+l).data(o),p.setCopyObjStyle(i,o)})}(o)}}createConnectArray(t,e,l,o,a,d,i){let s={},p=this;s.update_id=i,s.array=o,!1===e.endsWith(":")&&(e+=":");let n=t.append("div").datum(s);n.append("span").style("user-select","none").html(e),n.append("br");let r,u,c=n.append("div").attr("id",l+"main_division");if(!1===a.hasOwnProperty("according_id"))u=a.subtype,r=p.deepCopy(o);else{let t=a.according_id;t=t.replaceAll(">","_")+"_element";let e=d3.select("#"+t).datum().value;u=a.subtype[e],r=a.defaults[e]}function y(t,e,a){p.setCopyObjStyle(i,a),c.html(""),n.datum().array=a,c.append("button").attr("id",l+"_hidden_update_btn").datum(t).style("visibility","hidden").on("click",function(t){!function(t){let e,l;if(!1===t.hasOwnProperty("according_id"))l=t.subtype,e=p.deepCopy(o);else{let o=t.according_id;o=o.replaceAll(">","_")+"_element";let a=d3.select("#"+o).datum().value;l=t.subtype[a],e=t.defaults[a]}y(t,l,e)}(t)});let d=c.append("div").style("text-align","center");"float"===e?(d.append("input").attr("id",l+"_add_btn").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","20px").attr("value","+").attr("clicked","false").on("click",function(){let l=p.deepCopy(n.datum().array);if(l.push(.5),n.datum().array=l,y(t,e,l),"false"===d3.select(this).attr("clicked")){let e=t.select_id.replaceAll(">","_")+"_add_btn";d3.select("#"+e).attr("clicked","true"),d3.select("#"+e).dispatch("click")}d3.select(this).attr("clicked","false")}),d.append("input").attr("id",l+"_sub_btn").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","20px").attr("value","-").attr("clicked","false").on("click",function(){let l=p.deepCopy(n.datum().array);if(l.length>2){if(l.pop(),n.datum().array=l,y(t,e,l),"false"===d3.select(this).attr("clicked")){let e=t.select_id.replaceAll(">","_")+"_sub_btn";d3.select("#"+e).attr("clicked","true"),d3.select("#"+e).dispatch("click")}d3.select(this).attr("clicked","false")}}),d.append("br"),d.append("div").attr("id",l+"_element").style("display","inline").style("text-align","left").selectAll(".input_array"+l).data(a).enter().append("input").attr("class","input_array"+l).attr("type","number").style("border-radius","6px").style("background-color","#404040").style("color","white").attr("step",.1).style("width","4.5em").attr("value",function(t){return t}).attr("min",t.bounds[0]).attr("max",t.bounds[1]).on("change",function(t,e){console.log("changed value");let o=p.deepCopy(n.datum().array);o[e]=parseFloat(d3.select(this).property("value")),n.datum().array=o,d3.selectAll(".input_array"+l).data(o),p.setCopyObjStyle(i,o)})):"color"===e?(d.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","20px").attr("id",l+"_add_btn").attr("value","+").attr("clicked","false").on("click",function(){let l=p.deepCopy(n.datum().array);if(l.push("#FFFFFF"),n.datum().array=l,y(t,e,l),"false"===d3.select(this).attr("clicked")){let e=t.select_id.replaceAll(">","_")+"_add_btn";d3.select("#"+e).attr("clicked","true"),d3.select("#"+e).dispatch("click")}d3.select(this).attr("clicked","false")}),d.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","20px").attr("id",l+"_sub_btn").attr("value","-").attr("clicked","false").on("click",function(){let l=p.deepCopy(n.datum().array);if(l.length>2){if(l.pop(),n.datum().array=l,y(t,e,l),"false"===d3.select(this).attr("clicked")){let e=t.select_id.replaceAll(">","_")+"_sub_btn";d3.select("#"+e).attr("clicked","true"),d3.select("#"+e).dispatch("click")}d3.select(this).attr("clicked","false")}}),d.append("br"),d.append("div").attr("id",l+"_element").style("display","inline").style("text-align","left").selectAll(".input_array"+l).data(a).enter().append("input").attr("class","input_array"+l).attr("type","color").style("border-radius","3px").style("background-color","#ffffff00").style("padding","0px").style("width","4em").style("height","2em").style("border-color","#ffffff00").attr("value",function(t){let e=t;return e=p.colorToRGB(e),e=p.rgbToHex(e[0],e[1],e[2])}).on("change",function(t,e){console.log("changed c value");let o=p.deepCopy(n.datum().array);o[e]=parseFloat(d3.select(this).property("value")),n.datum().array=o,d3.selectAll(".input_array"+l).data(o),p.setCopyObjStyle(i,o)})):"text"===e?(d.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","20px").attr("id",l+"_add_btn").attr("value","+").attr("clicked","false").on("click",function(){let l=p.deepCopy(n.datum().array);if(l.push("Change this"),n.datum().array=l,y(t,e,l),"false"===d3.select(this).attr("clicked")){let e=t.select_id.replaceAll(">","_")+"_add_btn";d3.select("#"+e).attr("clicked","true"),d3.select("#"+e).dispatch("click")}d3.select(this).attr("clicked","false")}),d.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","20px").attr("id",l+"_sub_btn").attr("value","-").attr("clicked","false").on("click",function(){let l=p.deepCopy(n.datum().array);if(l.length>2){if(l.pop(),n.datum().array=l,y(t,e,l),"false"===d3.select(this).attr("clicked")){let e=t.select_id.replaceAll(">","_")+"_sub_btn";d3.select("#"+e).attr("clicked","true"),d3.select("#"+e).dispatch("click")}d3.select(this).attr("clicked","false")}}),d.append("br"),d.append("div").attr("id",l+"_element").style("display","inline").style("text-align","left").selectAll(".input_array"+l).data(a).enter().append("input").attr("class","input_array"+l).attr("type","text").style("border-radius","6px").style("background-color","#404040").style("color","white").attr("size","5").attr("value",function(t){return t}).on("change",function(t,e){console.log("changed t value");let o=p.deepCopy(n.datum().array);o[e]=parseFloat(d3.select(this).property("value")),n.datum().array=o,d3.selectAll(".input_array"+l).data(o),p.setCopyObjStyle(i,o)})):"floatWString"===e&&(d.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","20px").attr("id",l+"_add_btn").attr("value","+").attr("clicked","false").on("click",function(){let l=p.deepCopy(n.datum().array);if(l.push(.5),n.datum().array=l,y(t,e,l),"false"===d3.select(this).attr("clicked")){let e=t.select_id.replaceAll(">","_")+"_add_btn";d3.select("#"+e).attr("clicked","true"),d3.select("#"+e).dispatch("click")}d3.select(this).attr("clicked","false")}),d.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","20px").attr("id",l+"_sub_btn").attr("value","-").attr("clicked","false").on("click",function(){let l=p.deepCopy(n.datum().array);if(l.length>2){if(l.pop(),n.datum().array=l,y(t,e,l),"false"===d3.select(this).attr("clicked")){let e=t.select_id.replaceAll(">","_")+"_sub_btn";d3.select("#"+e).attr("clicked","true"),d3.select("#"+e).dispatch("click")}d3.select(this).attr("clicked","false")}}),d.append("br"),d.append("div").attr("id",l+"_element").style("display","inline").style("text-align","left").selectAll(".input_array"+l).data(a).enter().append("input").attr("class","input_array"+l).attr("type","text").style("border-radius","6px").style("background-color","#404040").style("color","white").attr("size","5").attr("value",function(t){return t}).attr("previous_value",function(t){return t}).on("change",function(e,o){let a=d3.select(this).property("value"),d=p.isNumeric(a);if(t.allow.indexOf(a)>-1||d){if(!0===d&&(a=parseFloat(a)),t.bounds&&(parseFloat(a)<t.bounds[0]||parseFloat(a)>t.bounds[1])){let t=d3.select(this).attr("previous_value");return void d3.select(this).property("value",t+"")}d3.select(this).attr("previous_value",parseFloat(a));let e=p.deepCopy(n.datum().array);e[o]=parseFloat(d3.select(this).property("value")),n.datum().array=e,d3.selectAll(".input_array"+l).data(e),p.setCopyObjStyle(i,e)}else{let t=d3.select(this).attr("previous_value");d3.select(this).property("value",t+"")}}))}y(a,u,r)}isNumeric(t){return!isNaN(parseFloat(t))&&isFinite(t)}isNumericInt(t){return!isNaN(parseInt(t))&&isFinite(t)}createTextFloat(t,e,l,o,a,d,i){let s=this,p={};p.update_id=i,p.allow=a.allow,p.bounds=a.bounds,!1===e.endsWith(":")&&!1===e.endsWith("?")&&(e+=":");let n=t.append("div");n.append("span").style("user-select","none").html(e),n.append("br");let r=n.append("div").style("text-align","center");s.setCopyObjStyle(i,o);r.append("input").datum(p).attr("id",l+"_element").attr("type","text").style("border-radius","6px").style("background-color","#404040").style("color","white").attr("size","5").attr("value",o).attr("previous_value",o).on("change",function(t){let e=d3.select(this).property("value"),l=s.isNumeric(e);if(t.allow.indexOf(e)>-1||l){if(!0===l&&(e=parseFloat(e)),t.bounds&&(parseFloat(e)<t.bounds[0]||parseFloat(e)>t.bounds[1])){let t=d3.select(this).attr("previous_value");return void d3.select(this).property("value",t+"")}d3.select(this).attr("previous_value",parseFloat(e)),s.setCopyObjStyle(i,e)}else{let t=d3.select(this).attr("previous_value");d3.select(this).property("value",t+"")}});d&&n.append("br")}createText(t,e,l,o,a,d){let i={};i.update_id=d,!1===e.endsWith(":")&&!1===e.endsWith("?")&&(e+=":");let s=t.append("div");s.append("span").style("user-select","none").html(e),s.append("br");let p=s.append("div").style("text-align","center"),n=this;n.setCopyObjStyle(d,o);p.append("input").datum(i).attr("id",l+"_element").attr("type","text").style("border-radius","6px").style("background-color","#404040").style("color","white").attr("size","5").attr("value",o).on("change",function(t){console.log("changed text");let e=d3.select(this).property("value");n.setCopyObjStyle(d,e)});a&&s.append("br")}deepCopy(t){return JSON.parse(JSON.stringify(t))}colorToRGB(t){var e,l;(e=document.createElement("canvas")).height=1,e.width=1,(l=e.getContext("2d")).fillStyle=t,l.fillRect(0,0,1,1);let o=(l.getImageData(0,0,1,1).data+"").split(","),a=o.slice(0,o.length-1);a.join(",");return a}componentToHex(t){var e=(t=parseInt(t)).toString(16);return 1==e.length?"0"+e:e}rgbToHex(t,e,l){return"#"+this.componentToHex(t)+this.componentToHex(e)+this.componentToHex(l)}retrieveSubKeysHTMLObj(t){if(!1===t.includes(">"))return Object.keys(this.style_obj_keys_to_html[t]);{let e=t.split(">"),l=e[0];e=e.slice(1);let o=this.deepCopy(this.style_obj_keys_to_html[l]);for(let t=0;t<e.length;t++){let l=e[t];o=o.hasOwnProperty("subs")?o.subs[l]:o[l]}return Object.keys(o)}}retrieveStyleHTMLFromKeys(t){if(!1===t.includes(">"))return this.style_obj_keys_to_html[t];{let e=t.split(">"),l=e[0];e=e.slice(1);let o=this.deepCopy(this.style_obj_keys_to_html[l]);for(let t=0;t<e.length;t++){let l=e[t];o=o.hasOwnProperty("subs")?o.subs[l]:o[l]}return o}}elementCreator(t,e,l){let o=this.retrieveStyleHTMLFromKeys(t);l||(l=t);let a=t.replaceAll(">","_"),d=d3.select("#"+e);if("dict"===o.type){this.createDropDown(d,o.title,a,!1,"left",o.pad,o.cpad);let e=a+"main_editor",l=this.retrieveSubKeysStyleObj(t);for(let o=0;o<l.length;o++){let a=t+">"+l[o];"skip"!==this.retrieveStyleHTMLFromKeys(a)&&this.elementCreator(a,e)}}else if("select"===o.type){let e=this.retrieveSubObjStyleObj(l);this.createSelect(d,o.title,a,o.options,e,o.updatable,o,t)}else if("relative_dict"===o.type){this.createDropDown(d,o.title,a,!1,"left",o.pad,o.cpad);let e=a+"main_editor",l=o.select_id,i=this.retrieveSubObjStyleObj(l),s=o.subs[i];for(let l=0;l<s.length;l++){let o=t+">"+s[l];this.elementCreator(o,e)}}else if("float"===o.type){let e=this.retrieveSubObjStyleObj(l);(!e||e instanceof Object)&&(e=o.default),this.createFloatSpinner(d,o.title,a,e,o.bounds,!0,t)}else if("int"===o.type){let e=this.retrieveSubObjStyleObj(l);(!e||e instanceof Object)&&(e=o.default),this.createIntSpinner(d,o.title,a,e,o.bounds,!0,t)}else if("color"===o.type){let e=this.retrieveSubObjStyleObj(l);(!e||e instanceof Object)&&(e=o.default),this.createColorInput(d,o.title,a,e,!0,t)}else if("composed_dict"===o.type){if(2===o.depth){let e=Object.keys(o.subs).sort(function(t,e){return t-e}),l=Object.keys(this.getObjsAtDepth(o.subs,1)).sort(function(t,e){return t-e}),i=a;i=i.replaceAll(">","_"),this.createDropDown(d,o.title,i,!1,"left",o.pad,o.cpad);let s=i+"main_editor",p=d3.select("#"+s);for(let a=0;a<e.length;a++){let d=e[a],i=p.append("p");for(let e=0;e<l.length;e++){let p=l[e],n=(o.subs[d][p],s+"_l"+a+"_c"+e),r=(i.append("span").attr("id",n),t+">"+(d+">"+p));this.elementCreator(r,n)}}}else if(1===o.depth){let e=a;e=e.replaceAll(">","_"),this.createDropDown(d,o.title,e,!1,"left",o.pad,o.cpad);let l=e+"main_editor",i=d3.select("#"+l).append("p"),s=Object.keys(o.subs).sort(function(t,e){return t-e});for(let e=0;e<s.length;e++){let a=s[e],d=(o.subs[a],l+"_c"+e),p=(i.append("span").attr("id",d),t+">"+a);this.elementCreator(p,d)}}}else if("array"===o.type){let e=this.retrieveSubObjStyleObj(l);(!e||e instanceof Object)&&(e=o.default),this.createArrayEditor(d,o.title,a,e,o,!0,t)}else if("boolean"===o.type){let e=this.retrieveSubObjStyleObj(l);(!e||e instanceof Object)&&(e=o.default),this.createCheckBox(d,o.title,a,e,!0,t)}else if("floatWString"===o.type){let e=this.retrieveSubObjStyleObj(l);(!e||e instanceof Object)&&(e=o.default),this.createTextFloat(d,o.title,a,e,o,!0,t)}else if("arrayConnected"===o.type){let e=this.retrieveSubObjStyleObj(l);(!e||e instanceof Object)&&(e=o.default),this.createConnectArray(d,o.title,a,e,o,!0,t)}else if("arrayConnectedAccording"===o.type){let e=this.retrieveSubObjStyleObj(l);(!e||e instanceof Object)&&(e=o.default),this.createConnectArray(d,o.title,a,e,o,!0,t)}else if("text"===o.type){let e=this.retrieveSubObjStyleObj(l);(!e||e instanceof Object)&&(e=o.default),this.createText(d,o.title,a,e,!0,t)}}getObjsAtDepth(t,e){let l=1,o=this.deepCopy(t);for(;l<=e;){o=o[Object.keys(o)[0]],l+=1}return o}sendToNaViewObj(){this.naview_obj.setStyleObjResetView(this.style_obj_copy)}downloadStyleObject(){let t=JSON.stringify(this.style_obj_copy);var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),e.setAttribute("download","style_obj.txt"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}downloadImage(t){let e=prompt("Enter image file name:","image."+t);if(e){let n=this.naview_obj.getSvgId(),r=document.getElementById(n).innerHTML,u=d3.select("#"+n).attr("width"),c=d3.select("#"+n).attr("height"),y='<svg title="plot" version="1.1" xmlns="http://www.w3.org/2000/svg" width="'+u+'px" height="'+c+'px" >'+r+"</svg>";var l=window.URL||window.webkitURL||window;let f=new Blob([y],{type:"image/svg+xml;charset=utf-8'"});var o=l.createObjectURL(f),a=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),d=document.createElement("a");if(d.setAttribute("download",e),"svg"===t)d.setAttribute("href",o),d.dispatchEvent(a),l.revokeObjectURL(o);else if("png"===t){var i=document.createElement("canvas");i.width=u,i.height=c;var s=i.getContext("2d"),p=new Image;p.onload=function(){s.drawImage(p,0,0),l.revokeObjectURL(o);var t=i.toDataURL("image/png").replace("image/png","image/octet-stream");d.setAttribute("href",t),d.dispatchEvent(a)},p.src=o}}}openConsole(){0===d3.select("#"+this.console_id).size()?this.console_status=!1:this.console_status=!0,!1===this.console_status&&(this.createConsole(),this.console_status=!0)}createConsole(){let t=d3.select("#"+this.console_id);if(0===t.size()){let e=this.naview_obj.bbox;(t=d3.select("body").append("div").attr("id",this.console_id)).style("position","absolute"),t.style("top",e.top+.9*e.height+"px"),t.style("left",e.left+"px"),t.style("z-index","7"),t.style("max-width",.85*e.width+"px"),t.style("min-width",.85*e.width+"px"),t.style("background-color","#000000bf"),t.style("font-family","monospace"),t.style("font-size","15px"),t.style("color","white"),t.style("min-height","10%"),this.console_type="Text",this.buildConsole()}}buildConsole(){let t=this,e=d3.select("#"+this.console_id);e.html("");let l=e.append("div").style("text-align","center");l.append("div").style("text-align","right").append("span").attr("id",this.console_id+"close").style("cursor","pointer").style("user-select","none").html("&#10006;").on("click",function(){t.console_status=!1,d3.select("#"+t.console_id).remove()}),l.append("span").html("Currently Editing:");let o=l.append("span").append("select").attr("id",t.console_id+"_select_type").style("border-radius","6px").style("background-color","#404040").style("color","white").style("margin","5px").style("padding","2px").style("font-size","15px").style("min-width","20%").style("font-family","monospace").on("change",function(){var e=d3.select(this).property("value");t.console_type=e,t.buildConsole()}),a=["Text","Color"];for(let e=0;e<a.length;e++){let l=a[e],d=o.append("option").attr("value",l).html(l);l===t.console_type&&d.attr("selected","selected")}e.append("br");let d=e.append("div");if("Text"===this.console_type){let e=d.append("select").attr("id",t.console_id+"_text_select_type").style("border-radius","6px").style("background-color","#404040").style("color","white").style("margin","5px").style("padding","2px").style("font-size","15px").style("font-family","monospace").style("display","inline").on("change",function(){i(d3.select(this).property("value"))}),l=["Text-Based","Property-Based"];for(let t=0;t<l.length;t++){let o=l[t],a=e.append("option").attr("value",o).html(o);"Text-Based"===o&&a.attr("selected","selected")}d.append("div").attr("id","text_build_div").style("display","inline");function i(e){let l=d3.select("#text_build_div");if(l.html(""),"Text-Based"===e){if(d3.select("#"+t.console_id+"_text_select_pos").size()>0){s(d3.select("#"+t.console_id+"_text_select_pos").property("value"))}d3.select("#"+t.console_id+"_text_select_pos").attr("disabled",null),l.append("span").style("display","inline").html("Text:"),l.append("input").attr("id","text_build_div_text").attr("type","text").style("display","inline").style("border-radius","6px").style("background-color","#404040").style("color","white").attr("size","5").attr("value","")}else"Property-Based"===e&&(s("Element-Centered",!0),d3.select("#"+t.console_id+"_text_select_pos").property("value","Element-Centered"),d3.select("#"+t.console_id+"_text_select_pos").attr("disabled",!0),l.append("span").attr("id","text_build_div_span").datum({props:[]}).style("display","inline").html("Properties:"),l.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","15px").style("display","inline").attr("value","Add Text").on("click",function(){let e=prompt("Enter text to append:",""),l=t.deepCopy(d3.select("#text_build_div_span").datum());l.props.push(e),d3.select("#text_build_div_span").datum(l)}),l.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","15px").style("display","inline").attr("value","Add Prop.").on("click",function(){let e=d3.select("body").append("div").attr("id","modal_s").style("position","fixed").style("z-index","10").style("padding-top","100px").style("left","0").style("top","0").style("width","100%").style("height","100%").style("overflow","auto").style("background-color","rgb(0,0,0)").style("background-color","rgba(0,0,0,0.4)").append("div").style("text-align","center").style("background-color","#fefefe").style("margin","auto").style("padding","20px").style("border","1px solid #888").style("width","80%");e.append("span").html("&times;").style("color","black").style("float","right").style("font-size","28px").style("font-weight","bold").on("click",function(){d3.select("#modal_s").remove()}),e.append("p").html("Please select property to append:");let l=Object.values(t.naview_obj.getElementNamesCentroids()).map(function(t){return Object.keys(t)});l=l[0];let o=["id","type","dom_name","dom_iname","dom_itype","path_data","point","stroke","fill","opacity","stroke_size","circle_radius","stroke_width","centroid","path_piece_pts"];l=l.filter(function(t){return-1===o.indexOf(t)});let a={res_ind:"Residue Index",resname:"Residue Name",dom_aname:"Domain Name",res_1:"Residue 1-Letter Type",res_3:"Residue 3-Letter Type"};l=l.map(function(t){return a[t]});let d=Object.values(t.naview_obj.getCurrentProperties()).map(function(t){return Object.keys(t)});(d=d[0])&&l.push(...d),console.log("text_options3"),console.log(l);let i=e.append("select").attr("id","modal_select").style("margin","5px").style("min-width","20%").style("font-size","15px").style("padding","2px");for(let t=0;t<l.length;t++){let e=l[t],o=i.append("option").attr("value",e).html(e);0===t&&o.attr("selected","selected")}e.append("br"),e.append("button").html("OK").on("click",function(){let t={"Residue Index":"res_ind","Residue Name":"resname","Domain Name":"dom_aname","Residue 1-Letter Type":"res_1","Residue 3-Letter Type":"res_3"},e=d3.select("#modal_select").property("value");t.hasOwnProperty(e)&&(e=t[e]);let l=d3.select("#text_build_div_span").datum();l.props.push(e),d3.select("#text_build_div_span").datum(l),d3.select("#modal_s").remove()})}),l.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","15px").style("display","inline").attr("value","Reset").on("click",function(){let e=t.deepCopy(d3.select("#text_build_div_span").datum());e.props=[],d3.select("#text_build_div_span").datum(e)}))}i("Text-Based");let o=d.append("select").attr("id",t.console_id+"_text_select_pos").style("border-radius","6px").style("background-color","#404040").style("color","white").style("margin","5px").style("padding","2px").style("font-size","15px").style("font-family","monospace").style("display","inline").on("change",function(){s(d3.select(this).property("value"))}),a=["Absolute","Element-Centered"];for(let t=0;t<a.length;t++){let e=a[t],l=o.append("option").attr("value",e).html(e);"Absolute"===e&&l.attr("selected","selected")}d.append("div").attr("id","text_build_div2").style("display","inline");function s(e,l){l||(l=!1);let o=d3.select("#text_build_div2");if(o.html(""),"Absolute"===e)o.append("span").style("display","inline").html("X Pos:"),o.append("input").attr("id","text_build_div2_x").attr("type","number").attr("step",1).attr("min",0).attr("max",d3.select("#"+t.naview_obj.getSvgId()).attr("width")).attr("value",1).style("display","inline").style("border-radius","6px").style("background-color","#404040").style("color","white").style("width","4.5em"),o.append("span").style("display","inline").html("Y Pos:"),o.append("input").attr("id","text_build_div2_y").attr("type","number").attr("step",1).attr("min",0).attr("max",d3.select("#"+t.naview_obj.getSvgId()).attr("height")).attr("value",1).style("display","inline").style("border-radius","6px").style("background-color","#404040").style("color","white").style("width","4.5em");else if("Element-Centered"===e){o.append("span").style("display","inline").html("Element:");let e=o.append("select").attr("id","text_build_div2_element").style("border-radius","6px").style("background-color","#404040").style("color","white").style("margin","5px").style("padding","2px").style("font-size","15px").style("font-family","monospace").style("display","inline"),a=Object.values(t.naview_obj.getElementNamesCentroids());!0===l&&(console.log("prop_bas!"),a=a.filter(function(t){return t.hasOwnProperty("resname")})),a=a.map(function(t){return t.hasOwnProperty("resname")?t.resname:t.elname});for(let t=0;t<a.length;t++){let l=a[t],o=e.append("option").attr("value",l).html(l);0===t&&o.attr("selected","selected")}}}s("Absolute"),d.append("span").style("display","inline").html("dX Pos:"),d.append("input").attr("id","text_build_dx").attr("type","number").attr("step",1).attr("min",0).attr("max",d3.select("#"+t.naview_obj.getSvgId()).attr("width")).attr("value",0).style("display","inline").style("border-radius","6px").style("background-color","#404040").style("color","white").style("width","4.5em"),d.append("span").style("display","inline").html("dY Pos:"),d.append("input").attr("id","text_build_dy").attr("type","number").attr("step",1).attr("min",0).attr("max",d3.select("#"+t.naview_obj.getSvgId()).attr("height")).attr("value",0).style("display","inline").style("border-radius","6px").style("background-color","#404040").style("color","white").style("width","4.5em"),d.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","15px").style("display","inline").attr("value","Draw Text").on("click",function(){let e={},l=!1;"Text-Based"===d3.select("#"+t.console_id+"_text_select_type").property("value")?e.text=d3.select("#text_build_div_text").property("value"):(e.props=d3.select("#text_build_div_span").datum().props,l=!0),e.positioning={},"Absolute"===d3.select("#"+t.console_id+"_text_select_pos").property("value")?(e.positioning.type="absolute",e.positioning.x=parseFloat(d3.select("#text_build_div2_x").property("value")),e.positioning.y=parseFloat(d3.select("#text_build_div2_y").property("value"))):(e.positioning.type="residue_or_element",e.positioning.reference=d3.select("#text_build_div2_element").property("value")),e.positioning.dx=parseFloat(d3.select("#text_build_dx").property("value")),e.positioning.dy=parseFloat(d3.select("#text_build_dy").property("value"));let o=t.deepCopy(t.naview_obj.getTextRules());o.push(e),l&&d3.select("#text_build_div_span").datum([]),t.naview_obj.setTextRulesAndReRender(o)}),d.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","15px").style("display","inline").attr("value","Reset All").on("click",function(){t.naview_obj.setTextRulesAndReRender([])})}else"Color"===this.console_type&&(d.append("span").style("display","inline").html("Current Color Rule:"),d.append("input").attr("id","text_build_div_text").attr("type","text").style("display","inline").style("border-radius","6px").style("background-color","#404040").style("color","white").attr("value","").style("width","40%").property("disabled",!0),d.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","15px").style("display","inline").attr("value","Add Selection").on("click",function(){let e=d3.select("body").append("div").attr("id","modal_s").style("position","fixed").style("z-index","10").style("padding-top","100px").style("left","0").style("top","0").style("width","100%").style("height","100%").style("overflow","auto").style("background-color","rgb(0,0,0)").style("background-color","rgba(0,0,0,0.4)").append("div").style("text-align","center").style("background-color","#fefefe").style("margin","auto").style("padding","20px").style("border","1px solid #888").style("width","80%");e.append("span").html("&times;").style("color","black").style("float","right").style("font-size","28px").style("font-weight","bold").on("click",function(){d3.select("#modal_s").remove()}),e.append("p").html("Please choose Selection Key:");let l=t.naview_obj.getParsedProteinData().map(function(t){return t.id}),o=t.naview_obj.getAllResids(),a=[""];a.push(...t.deepCopy(o));let d={ALL:{specifier:[],additional:[]},"Helix:":{specifier:[],additional:[1,2,3,4,5,6]},"Loop:":{specifier:[],additional:[1,2,3,4,5,6]},"Id:":{specifier:[],additional:l},"Domain:":{specifier:[],additional:["I","II","III","IV"]},"1-Letter Amino Acid":{specifier:Object.keys(t.naview_obj.getOneToThree()),additional:a},"3-Letter Amino Acid":{specifier:Object.keys(t.naview_obj.getThreeToOne()),additional:a},resid:{specifier:[""],additional:o}},i=Object.values(t.naview_obj.getCurrentProperties()).map(function(t){return Object.keys(t)});i=i[0];let s=Object.keys(d),p=e.append("select").attr("id","modal_select").datum({value:s[0]}).style("margin","5px").style("min-width","20%").style("font-size","15px").style("padding","2px").on("change",function(){let t=d3.select(this).property("value"),e=d3.select("#color_div_select_more");e.html("");let l=d[t];if(1===l.specifier.length){let t=d3.select(this).datum();t.value="",d3.select(this).datum(t)}else if(l.specifier.length>1){let t=l.specifier,o=d3.select(this).datum();o.value=t[0],d3.select(this).datum(o),e.append("p").html("Please Specify the Selection Kind");let a=e.append("select").attr("id","modal_select3").datum({value:t[0]}).style("margin","5px").style("min-width","20%").style("font-size","15px").style("padding","2px").on("change",function(){let t=d3.select(this).property("value"),e=d3.select("#modal_select").datum();e.value=t,d3.select("#modal_select").datum(e)});for(let e=0;e<t.length;e++){let l=t[e],o=a.append("option").attr("value",l).html(l);0===e&&o.attr("selected","selected")}}else{let e=d3.select(this).datum();e.value=t,d3.select(this).datum(e)}if(l.additional.length>0){let t=l.additional;e.append("p").html("Please Specify the Selection Index");let o=e.append("select").attr("id","modal_select2").datum({value:t[0]}).style("margin","5px").style("min-width","20%").style("font-size","15px").style("padding","2px").on("change",function(){let t=d3.select("#modal_select2").property("value"),e=d3.select("#modal_select2").datum();e.value=t,d3.select("#modal_select2").datum(e)});for(let e=0;e<t.length;e++){let l=t[e],a=o.append("option").attr("value",l).html(l);0===e&&a.attr("selected","selected")}}});for(let t=0;t<s.length;t++){let e=s[t],l=p.append("option").attr("value",e).html(e);0===t&&l.attr("selected","selected")}e.append("br"),e.append("div").attr("id","color_div_select_more"),e.append("br"),e.append("button").html("OK").on("click",function(){let t=d3.select("#modal_select").datum().value;if(d3.select("#modal_select2").size()>0){t+=d3.select("#modal_select2").datum().value}let e=d3.select("#text_build_div_text").property("value");if(e){let l=e.split(",")[0],o=e.split(",").slice(1);o=o.join(","),e=(l=l+"&"+t)+o}else e=t;d3.select("#text_build_div_text").property("value",e),d3.select("#modal_s").remove()})}),d.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","15px").style("display","inline").attr("value","Add Color").on("click",function(){let e=d3.select("body").append("div").attr("id","modal_s").style("position","fixed").style("z-index","10").style("padding-top","100px").style("left","0").style("top","0").style("width","100%").style("height","100%").style("overflow","auto").style("background-color","rgb(0,0,0)").style("background-color","rgba(0,0,0,0.4)").append("div").style("text-align","center").style("background-color","#fefefe").style("margin","auto").style("padding","20px").style("border","1px solid #888").style("width","80%");e.append("span").html("&times;").style("color","black").style("float","right").style("font-size","28px").style("font-weight","bold").on("click",function(){d3.select("#modal_s").remove()}),e.append("p").html("Please select Color mode:");let l=e.append("select").attr("id","modal_select").style("margin","5px").style("min-width","20%").style("font-size","15px").style("padding","2px"),o=["Single Color","Map to Property"];for(let t=0;t<o.length;t++){let e=o[t],a=l.append("option").attr("value",e).html(e);0===t&&a.attr("selected","selected")}e.append("div").attr("id","color_opts_div").datum({color:"#ffffff"});l.on("change",function(){console.log("changed modal");let e=d3.select("#color_opts_div");e.html("");let l=d3.select("#modal_select").property("value");if(console.log("valuec"),console.log(l),"Single Color"===l)e.append("input").attr("id","color_selector").attr("type","color").style("border-radius","3px").style("background-color","#ffffff00").style("padding","0px").style("width","4em").style("height","2em").style("border-color","#ffffff00").attr("value",function(){return e.datum().color}).on("change",function(){let t=d3.select("#color_selector").property("value"),e=d3.select("#color_opts_div").datum();e.color=t,d3.select("#color_opts_div").datum(e)});else if("Map to Property"===l){let l=Object.values(t.naview_obj.getCurrentProperties()).map(function(t){return Object.keys(t)});if(l=l[0]){if(l.length>0){e.append("p").html("Select Property");let d=e.append("select").attr("id","modal_selects2a").datum({range:["#ADD8E6","#0000FF"],domain:["min","max"],property:l[0]}).style("margin","5px").style("min-width","20%").style("font-size","15px").style("padding","2px"),i=l;for(let t=0;t<i.length;t++){let e=i[t],l=d.append("option").attr("value",e).html(e);0===t&&l.attr("selected","selected")}function o(){let t=d3.select("#color_opts_div_ranges");t.html("");let e=d3.select("#modal_selects2a").datum().range;for(let l=0;l<e.length;l++){e[l];t.append("input").attr("type","color").attr("id",function(){return"colrange"+l}).datum({ind:l}).attr("value",function(t){return d3.select("#modal_selects2a").datum().range[t.ind]}).style("border-radius","3px").style("background-color","#ffffff00").style("padding","0px").style("width","4em").style("height","2em").style("border-color","#ffffff00").on("change",function(t){let e=d3.select("#colrange"+t.ind).property("value"),l=d3.select("#modal_selects2a").datum(),o=l.range;o[t.ind]=e,l.range=o,d3.select("#modal_selects2a").datum(l)})}}function a(){let e=d3.select("#color_opts_div_domains");e.html("");let l=d3.select("#modal_selects2a").datum().domain;for(let o=0;o<l.length;o++){l[o];e.append("input").attr("type","text").attr("id",function(){return"coldomain"+o}).datum({ind:o}).attr("value",function(t){return d3.select("#modal_selects2a").datum().domain[t.ind]}).attr("previous_value",function(t){return d3.select("#modal_selects2a").datum().domain[t.ind]}).style("border-radius","6px").style("background-color","#404040").style("color","white").attr("size","5").on("change",function(e){let l=d3.select("#coldomain"+e.ind).property("value"),o=t.isNumeric(l);if(["min","max"].indexOf(l)>-1||o){!0===o&&(l=parseFloat(l)),d3.select(this).attr("previous_value",l);let t=d3.select("#modal_selects2a").datum(),a=t.domain;a[e.ind]=l,t.domain=a,d3.select("#modal_selects2a").datum(t)}else{let t=d3.select(this).attr("previous_value");d3.select(this).property("value",t+"")}})}}d.on("change",function(){let t=d3.select("#modal_selects2a").property("value"),e=d3.select("#modal_selects2a").datum();e.property=t,d3.select("#modal_selects2a").datum(e)}),e.append("p").html("Set Color Range"),e.append("input").attr("id","crange_add").attr("type","button").attr("clicked","false").attr("value","Add Range").on("click",function(){let t=d3.select("#modal_selects2a").datum(),e=t.range;if(e.push("#ffffff"),t.range=e,d3.select("#modal_selects2a").datum(t),"false"===d3.select(this).attr("clicked")){let t="cdomain_add";d3.select("#"+t).attr("clicked","true"),d3.select("#"+t).dispatch("click")}d3.select(this).attr("clicked","false"),o()}),e.append("input").attr("id","crange_remove").attr("type","button").attr("clicked","false").attr("value","Del Range").on("click",function(){let t=d3.select("#modal_selects2a").datum(),e=t.range;if(e.length>2&&(e.pop(),t.range=e,d3.select("#modal_selects2a").datum(t),"false"===d3.select(this).attr("clicked"))){let t="cdomain_remove";d3.select("#"+t).attr("clicked","true"),d3.select("#"+t).dispatch("click")}d3.select(this).attr("clicked","false"),o()}),e.append("div").attr("id","color_opts_div_ranges"),o(),e.append("p").html("Select Property Domain"),e.append("input").attr("id","cdomain_add").attr("type","button").attr("clicked","false").attr("value","Add Domain").on("click",function(){let t=d3.select("#modal_selects2a").datum(),e=t.domain;if(e.push(.5),t.domain=e,d3.select("#modal_selects2a").datum(t),"false"===d3.select(this).attr("clicked")){let t="crange_add";d3.select("#"+t).attr("clicked","true"),d3.select("#"+t).dispatch("click")}d3.select(this).attr("clicked","false"),a()}),e.append("input").attr("id","cdomain_remove").attr("type","button").attr("clicked","false").attr("value","Del Domain").on("click",function(){let t=d3.select("#modal_selects2a").datum(),e=t.domain;if(e.length>2&&(e.pop(),t.domain=e,d3.select("#modal_selects2a").datum(t),"false"===d3.select(this).attr("clicked"))){let t="crange_remove";d3.select("#"+t).attr("clicked","true"),d3.select("#"+t).dispatch("click")}d3.select(this).attr("clicked","false"),a()}),e.append("div").attr("id","color_opts_div_domains"),a()}}else e.append("p").html("No Properties Found!")}}),l.dispatch("change"),e.append("br"),e.append("button").html("OK").on("click",function(){if(d3.select("#modal_selects2a").size()>0){let t=d3.select("#text_build_div_text").property("value");if(t){let e=t.split(",")[0],l=t.split(",").slice(1);l=l.join(",");let o=d3.select("#modal_selects2a").datum();t=e+(l=",by:"+o.property+","+o.range.join(";")+","+o.domain.join(";"))}else t=first_value;d3.select("#text_build_div_text").property("value",t)}else{let t=d3.select("#text_build_div_text").property("value");if(t){let e=t.split(",")[0],l=t.split(",").slice(1);l=l.join(","),t=e+(l=","+d3.select("#color_opts_div").datum().color)}else t=first_value;d3.select("#text_build_div_text").property("value",t)}d3.select("#modal_s").remove()})}),d.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","15px").style("display","inline").attr("value","Clear Rule").on("click",function(){d3.select("#text_build_div_text").property("value","")}),d.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","15px").style("display","inline").attr("value","Draw Rule").on("click",function(){let e=t.deepCopy(t.naview_obj.getColorRules()),l=d3.select("#text_build_div_text").property("value");e.push(l),t.naview_obj.setColorRulesAndReRender(e),d3.select("#text_build_div_text").property("value","")}),d.append("input").attr("type","button").style("border-radius","6px").style("color","white").style("background-color","#404040").style("font-size","15px").style("display","inline").attr("value","Reset Rules").on("click",function(){t.naview_obj.setColorRulesAndReRender([])}));e.append("br")}uploadProperties(t){let e=t.match(/[^\r\n]+/g),l=e[0].split(",");if(l.length<1)throw"Wrong Properties Header Format: No data";if(l.length<2)throw"Wrong Properties Header Format: Only one column";if("Resid"!==l[0])throw"Wrong Properties Header Format: Missing Resid in Column 1";e=e.slice(1,e.length);let o={};for(let t=0;t<e.length;t++){let a=e[t].split(","),d=a[0];if(!1===this.isNumericInt(d))throw"Wrong Resid Column Format: Only Integers allowed";o[d=parseInt(d)]={};for(let e=1;e<a.length;e++){let i=l[e],s=a[e];if(!1===this.isNumeric(s))throw"Wrong Properties at Line:"+(t+1)+" Column: "+(e+1)+" Format: Only Numeric values allowed";o[d][i]=parseFloat(s)}}console.log("new_properties_obj"),console.log(o),this.naview_obj.setStyleObj(this.style_obj_copy),this.naview_obj.setCurrentPropertiesResetView(o)}uploadRelations(t){let e=t.match(/[^\r\n]+/g),l=e[0].split(",");if(l.length<1)throw"Wrong Properties Header Format: No data";if(l.length<2)throw"Wrong Properties Header Format: Only one column";if("source"!==l[0])throw"Wrong Properties Header Format: Missing source in Column 1";if("target"!==l[1])throw"Wrong Properties Header Format: Missing target in Column 2";if("raw_weight"!==l[2])throw"Wrong Properties Header Format: Missing raw_weight in Column 3";if("type"!==l[3])throw"Wrong Properties Header Format: Missing type in Column 4";e=e.slice(1,e.length);let o=[];for(let t=0;t<e.length;t++){let l=e[t].split(",");if(!1===this.isNumeric(l[2]))throw"Wrong Resid raw_weight Column Format: Only Numbers allowed";let a=l[0];this.isNumericInt(a)&&(a=parseInt(a));let d=l[1];this.isNumericInt(d)&&(d=parseInt(d));let i={source:a,target:d,raw_weight:parseFloat(l[2]),type:l[3]};o.push(i)}this.naview_obj.setStyleObj(this.style_obj_copy),this.naview_obj.setCurrentRelationsResetView(o)}}