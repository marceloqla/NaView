<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Example with Fetch and Custom Style Object</title>
</head>
<body>
    <script src="d3.v5.min.js"></script>
    <script src="naview.js"></script>
    <script>
        var custom_style_obj = {
            "membrane": {
                "membrane_mode": "box",
                "membrane_draw_opts": {
                "hfill": "#ffffff",
                "hstroke": "#000000",
                "hstroke_s": 2,
                "hopacity": 0.6,
                "tfill": "#000000",
                "tstroke": "#000000",
                "tstroke_s": 2,
                "topacity": 0.6,
                "lipid_head_radius_width": 0.0075,
                "lipid_head_radius_height": 0.1,
                "lipid_tail_number": 2,
                "lipid_tail_breaks": 1,
                "lipid_tail_spacing": 0.001,
                "fill": "#ffff8a",
                "opacity": 0.6
                },
                "membrane_region_height": 0.4
            },
            "protein": {
                "helix_mode": "box",
                "helix_draw_opts": {
                "x_to_end_prop": 0.05,
                "y_to_mid_prop": 0.14285714285714285,
                "aa_area_perc_displacement": 0.1,
                "thickness": 0.55,
                "front_helix_stroke": "#000000",
                "back_helix_stroke": "#000000",
                "hh_stroke_size": 1.5,
                "type": "dicts",
                "fill": {
                    "type": "domain_and_name",
                    "I": {
                    "1": "#ff0000",
                    "2": "#ff0000",
                    "3": "#ff0000",
                    "4": "#7a7aff",
                    "5": "#ff0000",
                    "6": "#ff0000"
                    },
                    "II": {
                    "1": "#ff0000",
                    "2": "#ff0000",
                    "3": "#ff0000",
                    "4": "#7a7aff",
                    "5": "#ff0000",
                    "6": "#ff0000"
                    },
                    "III": {
                    "1": "#ff0000",
                    "2": "#ff0000",
                    "3": "#ff0000",
                    "4": "#7a7aff",
                    "5": "#ff0000",
                    "6": "#ff0000"
                    },
                    "IV": {
                    "1": "#ff0000",
                    "2": "#ff0000",
                    "3": "#ff0000",
                    "4": "#7a7aff",
                    "5": "#ff0000",
                    "6": "#ff0000"
                    }
                },
                "back_fill": {
                    "type": "domain_and_name",
                    "I": {
                    "1": "#fa8072",
                    "2": "#fa8072",
                    "3": "#fa8072",
                    "4": "#add8e6",
                    "5": "#fa8072",
                    "6": "#fa8072"
                    },
                    "II": {
                    "1": "#fa8072",
                    "2": "#fa8072",
                    "3": "#fa8072",
                    "4": "#add8e6",
                    "5": "#fa8072",
                    "6": "#fa8072"
                    },
                    "III": {
                    "1": "#fa8072",
                    "2": "#fa8072",
                    "3": "#fa8072",
                    "4": "#add8e6",
                    "5": "#fa8072",
                    "6": "#fa8072"
                    },
                    "IV": {
                    "1": "#fa8072",
                    "2": "#fa8072",
                    "3": "#fa8072",
                    "4": "#add8e6",
                    "5": "#fa8072",
                    "6": "#fa8072"
                    }
                },
                "stroke": {
                    "type": "domain_and_name",
                    "I": {
                    "1": "#ff0000",
                    "2": "#ff0000",
                    "3": "#ff0000",
                    "4": "#0000ff",
                    "5": "#ff0000",
                    "6": "#ff0000"
                    },
                    "II": {
                    "1": "#ff0000",
                    "2": "#ff0000",
                    "3": "#ff0000",
                    "4": "#0000ff",
                    "5": "#ff0000",
                    "6": "#ff0000"
                    },
                    "III": {
                    "1": "#ff0000",
                    "2": "#ff0000",
                    "3": "#ff0000",
                    "4": "#0000ff",
                    "5": "#ff0000",
                    "6": "#ff0000"
                    },
                    "IV": {
                    "1": "#ff0000",
                    "2": "#ff0000",
                    "3": "#ff0000",
                    "4": "#0000ff",
                    "5": "#ff0000",
                    "6": "#ff0000"
                    }
                },
                "stroke_size": 1.5,
                "opacity": {
                    "type": "domain_and_name",
                    "I": {
                    "1": 1,
                    "2": 1,
                    "3": 1,
                    "4": 1,
                    "5": 1,
                    "6": 1
                    },
                    "II": {
                    "1": 1,
                    "2": 1,
                    "3": 1,
                    "4": 1,
                    "5": 1,
                    "6": 1
                    },
                    "III": {
                    "1": 1,
                    "2": 1,
                    "3": 1,
                    "4": 1,
                    "5": 1,
                    "6": 1
                    },
                    "IV": {
                    "1": 1,
                    "2": 1,
                    "3": 1,
                    "4": 1,
                    "5": 1,
                    "6": 1
                    }
                }
                },
                "helix_region_width": {
                "type": "domain_and_name",
                "I": [
                    0.02,
                    0.02,
                    0.02,
                    0.02,
                    0.02,
                    0.02
                ],
                "II": [
                    0.02,
                    0.02,
                    0.02,
                    0.02,
                    0.02,
                    0.02
                ],
                "III": [
                    0.02,
                    0.02,
                    0.02,
                    0.02,
                    0.02,
                    0.02
                ],
                "IV": [
                    0.02,
                    0.02,
                    0.02,
                    0.02,
                    0.02,
                    0.02
                ]
                },
                "helix_region_height": {
                "I": [
                    0.4,
                    0.4,
                    0.4,
                    0.4,
                    0.4,
                    0.4
                ],
                "II": [
                    0.4,
                    0.4,
                    0.4,
                    0.4,
                    0.4,
                    0.4
                ],
                "III": [
                    0.4,
                    0.4,
                    0.4,
                    0.4,
                    0.4,
                    0.4
                ],
                "IV": [
                    0.4,
                    0.4,
                    0.4,
                    0.4,
                    0.4,
                    0.4
                ]
                },
                "helix_spacing_width": {
                "I": [
                    5,
                    5,
                    5,
                    5,
                    5,
                    5
                ],
                "II": [
                    5,
                    5,
                    5,
                    5,
                    5,
                    5
                ],
                "III": [
                    5,
                    5,
                    5,
                    5,
                    5,
                    5
                ],
                "IV": [
                    5,
                    5,
                    5,
                    5,
                    5,
                    5
                ]
                },
                "short_loops_draw_opts": {
                "type": "single",
                "stroke": "#000000",
                "fill": "none",
                "opacity": 1,
                "stroke_size": 3,
                "calc_len": {
                    "type": "fixed",
                    "calc": {
                    "length": 2,
                    "height": 0.1,
                    "width": 0.0025
                    }
                },
                "shape": {
                    "type": "swirl",
                    "calc": {
                    "y_step": 0.5,
                    "perc_step_y": 0.5,
                    "swirl_x": 1
                    }
                }
                },
                "pore_loops_draw_opts": {
                "type": "single",
                "stroke": "#000000",
                "fill": "none",
                "opacity": 1,
                "stroke_size": 3,
                "calc_len": {
                    "type": "reslen",
                    "calc": {
                    "length": 2
                    }
                },
                "shape": {
                    "type": "simple_skewed",
                    "calc": {
                    "perc_center_x": 0,
                    "y_step": 0.5
                    }
                }
                },
                "pore_region_width": {
                "I": 0.01,
                "II": 0.01,
                "III": 0.01,
                "IV": 0.01
                },
                "pore_region_height": {
                "I": 0.4,
                "II": 0.4,
                "III": 0.4,
                "IV": 0.4
                },
                "long_loops_draw_opts": {
                "type": "single",
                "stroke": "#000000",
                "fill": "none",
                "opacity": 1,
                "stroke_size": 3,
                "width": {
                    "type": "scaled"
                },
                "calc_len": {
                    "type": "fixed",
                    "calc": {
                    "length": 2,
                    "height": 0.1,
                    "width": 0.0025
                    }
                },
                "shape": {
                    "type": "mushroom",
                    "calc": {
                    "x_step": 0.5,
                    "y_step": 1,
                    "perc_center_x": 0.9,
                    "perc_step_y1": 0.1,
                    "perc_step_y2": 0.5
                    }
                }
                },
                "nter_loop_width": 0.05,
                "nter_loop_draw_opts": {
                "type": "single",
                "stroke": "#000000",
                "fill": "none",
                "opacity": 1,
                "stroke_size": 3,
                "calc_len": {
                    "type": "fixed",
                    "calc": {
                    "length": 2,
                    "start_loop": "edge",
                    "height": 0.1,
                    "width": 0.0025
                    }
                },
                "shape": {
                    "type": "n_curves",
                    "calc": {
                    "y_step": 0.5,
                    "perc_centers_height": [
                        1
                    ],
                    "loop_rotation": 30
                    }
                }
                },
                "cter_loop_width": 0.05,
                "cter_loop_draw_opts": {
                "type": "single",
                "stroke": "#000000",
                "fill": "none",
                "opacity": 1,
                "stroke_size": 3,
                "calc_len": {
                    "type": "fixed",
                    "calc": {
                    "height": 0.4,
                    "start_loop": "edge",
                    "width": 0.0025
                    }
                },
                "shape": {
                    "type": "n_curves",
                    "calc": {
                    "y_step": 0.5,
                    "perc_centers_height": [
                        1,
                        0.8
                    ],
                    "loop_rotation": -30
                    }
                }
                },
                "residue_centroid_draw_opts": {
                "type": "single",
                "stroke": "black",
                "fill": "red",
                "opacity": 1,
                "stroke_size": "0px",
                "circle_radius": "1.5px"
                },
                "residue_relations_draw_opts": {
                "type": "single",
                "opacity": 1,
                "stroke_size": 1,
                "centroid_pos": {
                    "type": "fixed",
                    "perc_y": "between",
                    "perc_x": "between",
                    "perc_dict": {
                    "intramembrane": {
                        "intramembrane": {
                        "perc_y1": "between",
                        "perc_x1": "between"
                        },
                        "intracellular": {
                        "perc_y1": 0.65,
                        "perc_x1": "between"
                        },
                        "extracellular": {
                        "perc_y1": 0.35,
                        "perc_x1": "between"
                        }
                    },
                    "intracellular": {
                        "intracellular": {
                        "perc_y1": "between",
                        "perc_x1": "between"
                        },
                        "intramembrane": {
                        "perc_y1": 0.65,
                        "perc_x1": "between"
                        },
                        "extracellular": {
                        "perc_y1": 0.85,
                        "perc_x1": 0.95
                        }
                    },
                    "extracellular": {
                        "extracellular": {
                        "perc_y1": "between",
                        "perc_x1": "between"
                        },
                        "intracellular": {
                        "perc_y1": 0.15,
                        "perc_x1": 0.05
                        },
                        "intramembrane": {
                        "perc_y1": 0.35,
                        "perc_x1": "between"
                        }
                    }
                    }
                },
                "weight_scaling": "absolute",
                "path_width_scaling": {
                    "type": "calc",
                    "perc_x": 0.01,
                    "domain": [
                    "min",
                    "max"
                    ],
                    "range": [
                    2,
                    5
                    ],
                    "group_by_type": true
                },
                "color_scaling": {
                    "type": "none",
                    "property": "weight",
                    "range": [
                    "red",
                    "green"
                    ],
                    "lighter_fill": true
                },
                "element_centroid_scaling": {
                    "type": "fixed",
                    "radius": 5
                },
                "stroke": "#008000",
                "fill": "#90ee90"
                }
            },
            "canvas": {
                "border": {
                "right": 0.02,
                "left": 0.02,
                "top": 0.02,
                "bottom": 0.02
                }
            },
            "text_defs": {
                "font_family": "sans-serif",
                "font_style": "italic",
                "font_size": 30,
                "fill": "#000000",
                "center_xy": true
            }
        };
        fetch("https://www.uniprot.org/uniprot/Q99250.txt")
                .then(response => response.text())
                .then(data => {
                    // Do something with your data
                    console.log(data);
                    var naview = new NaView({
                            "protein_input":data,
                            "style_obj_input":custom_style_obj
                        });
        });
    </script>
</body>
</html>
